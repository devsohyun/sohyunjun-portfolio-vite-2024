import{_ as zr}from"./extends-CCbyfPlC.js";import{r as pe,c as Wa,j as nr}from"./index-B_Vz3whB.js";import{m as ya,s as Na}from"./shaderMaterial-B7MU6ypn.js";import{Z as ft,C as Nt,V as Ke,ao as zt,ap as jr,aj as yt,z as za,aq as ja,n as bt,g as ur,ar as bn,as as Va,at as Xa,au as Ya,av as Ha,aw as Ja,a as Vr,h as Qa,T as Ka,L as _n,ax as qa,ay as Za,az as $a,B as eo,D as ba,aA as to,aB as ro,aC as no,aD as Xr,ah as ao,aE as oo,aF as io,j as Yr,aG as Hr,f as so,al as fo}from"./Webgl-ChNgkivt.js";function Bt(f,r,u){return r in f?Object.defineProperty(f,r,{value:u,enumerable:!0,configurable:!0,writable:!0}):f[r]=u,f}function Rr(f,r){(r==null||r>f.length)&&(r=f.length);for(var u=0,l=new Array(r);u<r;u++)l[u]=f[u];return l}function lo(f,r){if(f){if(typeof f=="string")return Rr(f,r);var u=Object.prototype.toString.call(f).slice(8,-1);if(u==="Object"&&f.constructor&&(u=f.constructor.name),u==="Map"||u==="Set")return Array.from(f);if(u==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(u))return Rr(f,r)}}function uo(f){if(Array.isArray(f))return Rr(f)}function co(f){if(typeof Symbol<"u"&&f[Symbol.iterator]!=null||f["@@iterator"]!=null)return Array.from(f)}function ho(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function vo(f){return uo(f)||co(f)||lo(f)||ho()}new ft;new ft;function po(f,r,u){return Math.max(r,Math.min(u,f))}function go(f,r){return po(f-Math.floor(f/r)*r,0,r)}function mo(f,r){var u=go(r-f,Math.PI*2);return u>Math.PI&&(u-=Math.PI*2),u}function _a(f,r){if(!(f instanceof r))throw new TypeError("Cannot call a class as a function")}var je=function f(r,u,l){var t=this;_a(this,f),Bt(this,"dot2",function(e,a){return t.x*e+t.y*a}),Bt(this,"dot3",function(e,a,o){return t.x*e+t.y*a+t.z*o}),this.x=r,this.y=u,this.z=l},yo=[new je(1,1,0),new je(-1,1,0),new je(1,-1,0),new je(-1,-1,0),new je(1,0,1),new je(-1,0,1),new je(1,0,-1),new je(-1,0,-1),new je(0,1,1),new je(0,-1,1),new je(0,1,-1),new je(0,-1,-1)],wn=[151,160,137,91,90,15,131,13,201,95,96,53,194,233,7,225,140,36,103,30,69,142,8,99,37,240,21,10,23,190,6,148,247,120,234,75,0,26,197,62,94,252,219,203,117,35,11,32,57,177,33,88,237,149,56,87,174,20,125,136,171,168,68,175,74,165,71,134,139,48,27,166,77,146,158,231,83,111,229,122,60,211,133,230,220,105,92,41,55,46,245,40,244,102,143,54,65,25,63,161,1,216,80,73,209,76,132,187,208,89,18,169,200,196,135,130,116,188,159,86,164,100,109,198,173,186,3,64,52,217,226,250,124,123,5,202,38,147,118,126,255,82,85,212,207,206,59,227,47,16,58,17,182,189,28,42,223,183,170,213,119,248,152,2,44,154,163,70,221,153,101,155,167,43,172,9,129,22,39,253,19,98,108,110,79,113,224,232,178,185,112,104,218,246,97,228,251,34,242,193,238,210,144,12,191,179,162,241,81,51,145,235,249,14,239,107,49,192,214,31,181,199,106,157,184,84,204,176,115,121,50,45,127,4,150,254,138,236,205,93,222,114,67,29,24,72,243,141,128,195,78,66,215,61,156,180],Un=new Array(512),Sn=new Array(512),bo=function(r){r>0&&r<1&&(r*=65536),r=Math.floor(r),r<256&&(r|=r<<8);for(var u=0;u<256;u++){var l;u&1?l=wn[u]^r&255:l=wn[u]^r>>8&255,Un[u]=Un[u+256]=l,Sn[u]=Sn[u+256]=yo[l%12]}};bo(0);function _o(f){if(typeof f=="number")f=Math.abs(f);else if(typeof f=="string"){var r=f;f=0;for(var u=0;u<r.length;u++)f=(f+(u+1)*(r.charCodeAt(u)%96))%2147483647}return f===0&&(f=311),f}function xn(f){var r=_o(f);return function(){var u=r*48271%2147483647;return r=u,u/2147483647}}var wo=function f(r){var u=this;_a(this,f),Bt(this,"seed",0),Bt(this,"init",function(l){u.seed=l,u.value=xn(l)}),Bt(this,"value",xn(this.seed)),this.init(r)};new wo(Math.random());var Uo=function(r){var u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:.01,l=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,t=arguments.length>3&&arguments[3]!==void 0?arguments[3]:1/(2*Math.PI);return l/Math.atan(1/u)*Math.atan(Math.sin(2*Math.PI*r*t)/u)},wa=function(r){return 1/(1+r+.48*r*r+.235*r*r*r)},So=function(r){return r},xo={in:function(r){return 1-Math.cos(r*Math.PI/2)},out:function(r){return Math.sin(r*Math.PI/2)},inOut:function(r){return-(Math.cos(Math.PI*r)-1)/2}},To={in:function(r){return r*r*r},out:function(r){return 1-Math.pow(1-r,3)},inOut:function(r){return r<.5?4*r*r*r:1-Math.pow(-2*r+2,3)/2}},ko={in:function(r){return r*r*r*r*r},out:function(r){return 1-Math.pow(1-r,5)},inOut:function(r){return r<.5?16*r*r*r*r*r:1-Math.pow(-2*r+2,5)/2}},Fo={in:function(r){return 1-Math.sqrt(1-Math.pow(r,2))},out:function(r){return Math.sqrt(1-Math.pow(r-1,2))},inOut:function(r){return r<.5?(1-Math.sqrt(1-Math.pow(2*r,2)))/2:(Math.sqrt(1-Math.pow(-2*r+2,2))+1)/2}},Co={in:function(r){return r*r*r*r},out:function(r){return 1- --r*r*r*r},inOut:function(r){return r<.5?8*r*r*r*r:1-8*--r*r*r*r}},Ao={in:function(r){return r===0?0:Math.pow(2,10*r-10)},out:function(r){return r===1?1:1-Math.pow(2,-10*r)},inOut:function(r){return r===0?0:r===1?1:r<.5?Math.pow(2,20*r-10)/2:(2-Math.pow(2,-20*r+10))/2}};function Ae(f,r,u){var l=arguments.length>3&&arguments[3]!==void 0?arguments[3]:.25,t=arguments.length>4&&arguments[4]!==void 0?arguments[4]:.01,e=arguments.length>5&&arguments[5]!==void 0?arguments[5]:1/0,a=arguments.length>6&&arguments[6]!==void 0?arguments[6]:wa,o=arguments.length>7&&arguments[7]!==void 0?arguments[7]:.001,n="velocity_"+r;if(f.__damp===void 0&&(f.__damp={}),f.__damp[n]===void 0&&(f.__damp[n]=0),Math.abs(f[r]-u)<=o)return f[r]=u,!1;l=Math.max(1e-4,l);var i=2/l,s=a(i*t),c=f[r]-u,d=u,h=e*l;c=Math.min(Math.max(c,-h),h),u=f[r]-c;var y=(f.__damp[n]+i*c)*t;f.__damp[n]=(f.__damp[n]-i*y)*s;var m=u+(c+y)*s;return d-f[r]>0==m>d&&(m=d,f.__damp[n]=(m-d)/t),f[r]=m,!0}var Mo=function(r){return r&&r.isCamera},Eo=function(r){return r&&r.isLight},Et=new Ke,Tn=new zt,kn=new zt,Dt=new jr,Er=new Ke;function Do(f,r,u,l,t,e,a){typeof r=="number"?Et.setScalar(r):Array.isArray(r)?Et.set(r[0],r[1],r[2]):Et.copy(r);var o=f.parent;f.updateWorldMatrix(!0,!1),Er.setFromMatrixPosition(f.matrixWorld),Mo(f)||Eo(f)?Dt.lookAt(Er,Et,f.up):Dt.lookAt(Et,Er,f.up),lr(f.quaternion,kn.setFromRotationMatrix(Dt),u,l,t,e,a),o&&(Dt.extractRotation(o.matrixWorld),Tn.setFromRotationMatrix(Dt),lr(f.quaternion,kn.copy(f.quaternion).premultiply(Tn.invert()),u,l,t,e,a))}function mt(f,r,u,l,t,e,a,o){return Ae(f,r,f[r]+mo(f[r],u),l,t,e,a,o)}var Pt=new ft,Fn,Cn;function Po(f,r,u,l,t,e,a){return typeof r=="number"?Pt.setScalar(r):Array.isArray(r)?Pt.set(r[0],r[1]):Pt.copy(r),Fn=Ae(f,"x",Pt.x,u,l,t,e,a),Cn=Ae(f,"y",Pt.y,u,l,t,e,a),Fn||Cn}var ht=new Ke,An,Mn,En;function Gr(f,r,u,l,t,e,a){return typeof r=="number"?ht.setScalar(r):Array.isArray(r)?ht.set(r[0],r[1],r[2]):ht.copy(r),An=Ae(f,"x",ht.x,u,l,t,e,a),Mn=Ae(f,"y",ht.y,u,l,t,e,a),En=Ae(f,"z",ht.z,u,l,t,e,a),An||Mn||En}var ot=new yt,Dn,Pn,On,Ln;function Oo(f,r,u,l,t,e,a){return typeof r=="number"?ot.setScalar(r):Array.isArray(r)?ot.set(r[0],r[1],r[2],r[3]):ot.copy(r),Dn=Ae(f,"x",ot.x,u,l,t,e,a),Pn=Ae(f,"y",ot.y,u,l,t,e,a),On=Ae(f,"z",ot.z,u,l,t,e,a),Ln=Ae(f,"w",ot.w,u,l,t,e,a),Dn||Pn||On||Ln}var Ot=new za,Rn,Gn,Bn;function Lo(f,r,u,l,t,e,a){return Array.isArray(r)?Ot.set(r[0],r[1],r[2],r[3]):Ot.copy(r),Rn=mt(f,"x",Ot.x,u,l,t,e,a),Gn=mt(f,"y",Ot.y,u,l,t,e,a),Bn=mt(f,"z",Ot.z,u,l,t,e,a),Rn||Gn||Bn}var vt=new Nt,In,Wn,Nn;function Ro(f,r,u,l,t,e,a){return r instanceof Nt?vt.copy(r):Array.isArray(r)?vt.setRGB(r[0],r[1],r[2]):vt.set(r),In=Ae(f,"r",vt.r,u,l,t,e,a),Wn=Ae(f,"g",vt.g,u,l,t,e,a),Nn=Ae(f,"b",vt.b,u,l,t,e,a),In||Wn||Nn}var Je=new zt,Ze=new yt,zn=new yt,Lt=new yt,jn,Vn,Xn,Yn;function lr(f,r,u,l,t,e,a){var o=f;Array.isArray(r)?Je.set(r[0],r[1],r[2],r[3]):Je.copy(r);var n=f.dot(Je)>0?1:-1;return Je.x*=n,Je.y*=n,Je.z*=n,Je.w*=n,jn=Ae(f,"x",Je.x,u,l,t,e,a),Vn=Ae(f,"y",Je.y,u,l,t,e,a),Xn=Ae(f,"z",Je.z,u,l,t,e,a),Yn=Ae(f,"w",Je.w,u,l,t,e,a),Ze.set(f.x,f.y,f.z,f.w).normalize(),zn.set(o.__damp.velocity_x,o.__damp.velocity_y,o.__damp.velocity_z,o.__damp.velocity_w),Lt.copy(Ze).multiplyScalar(zn.dot(Ze)/Ze.dot(Ze)),o.__damp.velocity_x-=Lt.x,o.__damp.velocity_y-=Lt.y,o.__damp.velocity_z-=Lt.z,o.__damp.velocity_w-=Lt.w,f.set(Ze.x,Ze.y,Ze.z,Ze.w),jn||Vn||Xn||Yn}var Rt=new ja,Hn,Jn,Qn;function Go(f,r,u,l,t,e,a){return Array.isArray(r)?Rt.set(r[0],r[1],r[2]):Rt.copy(r),Hn=Ae(f,"radius",Rt.radius,u,l,t,e,a),Jn=mt(f,"phi",Rt.phi,u,l,t,e,a),Qn=mt(f,"theta",Rt.theta,u,l,t,e,a),Hn||Jn||Qn}var ar=new jr,Kn=new Ke,qn=new zt,Zn=new Ke,$n,ea,ta;function Bo(f,r,u,l,t,e,a){var o=f;return o.__damp===void 0&&(o.__damp={position:new Ke,rotation:new zt,scale:new Ke},f.decompose(o.__damp.position,o.__damp.rotation,o.__damp.scale)),Array.isArray(r)?ar.set.apply(ar,vo(r)):ar.copy(r),ar.decompose(Kn,qn,Zn),$n=Gr(o.__damp.position,Kn,u,l,t,e,a),ea=lr(o.__damp.rotation,qn,u,l,t,e,a),ta=Gr(o.__damp.scale,Zn,u,l,t,e,a),f.compose(o.__damp.position,o.__damp.rotation,o.__damp.scale),$n||ea||ta}var ra=Object.freeze({__proto__:null,rsqw:Uo,exp:wa,linear:So,sine:xo,cubic:To,quint:ko,circ:Fo,quart:Co,expo:Ao,damp:Ae,dampLookAt:Do,dampAngle:mt,damp2:Po,damp3:Gr,damp4:Oo,dampE:Lo,dampC:Ro,dampQ:lr,dampS:Go,dampM:Bo});const Jr=pe.createContext(null);function Ua(){return pe.useContext(Jr)}function Wi({eps:f=1e-5,enabled:r=!0,infinite:u,horizontal:l,pages:t=1,distance:e=1,damping:a=.25,maxSpeed:o=1/0,style:n={},children:i}){const{get:s,setEvents:c,gl:d,size:h,invalidate:y,events:m}=bt(),[v]=pe.useState(()=>document.createElement("div")),[S]=pe.useState(()=>document.createElement("div")),[p]=pe.useState(()=>document.createElement("div")),U=d.domElement.parentNode,T=pe.useRef(0),_=pe.useMemo(()=>({el:v,eps:f,fill:S,fixed:p,horizontal:l,damping:a,offset:0,delta:0,scroll:T,pages:t,range(w,I,N=0){const J=w-N,b=J+I+N*2;return this.offset<J?0:this.offset>b?1:(this.offset-J)/(b-J)},curve(w,I,N=0){return Math.sin(this.range(w,I,N)*Math.PI)},visible(w,I,N=0){const J=w-N,b=J+I+N*2;return this.offset>=J&&this.offset<=b}}),[f,a,l,t]);pe.useEffect(()=>{v.style.position="absolute",v.style.width="100%",v.style.height="100%",v.style[l?"overflowX":"overflowY"]="auto",v.style[l?"overflowY":"overflowX"]="hidden",v.style.top="0px",v.style.left="0px";for(const I in n)v.style[I]=n[I];p.style.position="sticky",p.style.top="0px",p.style.left="0px",p.style.width="100%",p.style.height="100%",p.style.overflow="hidden",v.appendChild(p),S.style.height=l?"100%":`${t*e*100}%`,S.style.width=l?`${t*e*100}%`:"100%",S.style.pointerEvents="none",v.appendChild(S),U.appendChild(v),v[l?"scrollLeft":"scrollTop"]=1;const x=m.connected||d.domElement;requestAnimationFrame(()=>m.connect==null?void 0:m.connect(v));const w=s().events.compute;return c({compute(I,N){const{left:J,top:b}=U.getBoundingClientRect(),L=I.clientX-J,M=I.clientY-b;N.pointer.set(L/N.size.width*2-1,-(M/N.size.height)*2+1),N.raycaster.setFromCamera(N.pointer,N.camera)}}),()=>{U.removeChild(v),c({compute:w}),m.connect==null||m.connect(x)}},[t,e,l,v,S,p,U]),pe.useEffect(()=>{if(m.connected===v){const x=h[l?"width":"height"],w=v[l?"scrollWidth":"scrollHeight"],I=w-x;let N=0,J=!0,b=!0;const L=()=>{if(!(!r||b)&&(y(),N=v[l?"scrollLeft":"scrollTop"],T.current=N/I,u)){if(!J){if(N>=I){const z=1-_.offset;v[l?"scrollLeft":"scrollTop"]=1,T.current=_.offset=-z,J=!0}else if(N<=0){const z=1+_.offset;v[l?"scrollLeft":"scrollTop"]=w,T.current=_.offset=z,J=!0}}J&&setTimeout(()=>J=!1,40)}};v.addEventListener("scroll",L,{passive:!0}),requestAnimationFrame(()=>b=!1);const M=z=>v.scrollLeft+=z.deltaY/2;return l&&v.addEventListener("wheel",M,{passive:!0}),()=>{v.removeEventListener("scroll",L),l&&v.removeEventListener("wheel",M)}}},[v,m,h,u,_,y,l,r]);let k=0;return ur((x,w)=>{k=_.offset,ra.damp(_,"offset",T.current,a,w,o,void 0,f),ra.damp(_,"delta",Math.abs(k-_.offset),a,w,o,void 0,f),_.delta>f&&y()}),pe.createElement(Jr.Provider,{value:_},i)}const Io=pe.forwardRef(({children:f},r)=>{const u=pe.useRef(null),l=Ua(),{width:t,height:e}=bt(a=>a.viewport);return ur(()=>{u.current.position.x=l.horizontal?-t*(l.pages-1)*l.offset:0,u.current.position.y=l.horizontal?0:e*(l.pages-1)*l.offset}),pe.createElement("group",{ref:ya([r,u])},f)}),Wo=pe.forwardRef(({children:f,style:r,...u},l)=>{const t=Ua(),e=pe.useRef(null),{width:a,height:o}=bt(s=>s.size),n=pe.useContext(bn),i=pe.useMemo(()=>Wa(t.fixed),[t.fixed]);return ur(()=>{t.delta>t.eps&&(e.current.style.transform=`translate3d(${t.horizontal?-a*(t.pages-1)*t.offset:0}px,${t.horizontal?0:o*(t.pages-1)*-t.offset}px,0)`)}),i.render(pe.createElement("div",zr({ref:ya([l,e]),style:{...r,position:"absolute",top:0,left:0,willChange:"transform"}},u),pe.createElement(Jr.Provider,{value:t},pe.createElement(bn.Provider,{value:n},f)))),null}),Ni=pe.forwardRef(({html:f,...r},u)=>{const l=f?Wo:Io;return pe.createElement(l,zr({ref:u},r))});function No(){var f=Object.create(null);function r(t,e){var a=t.id,o=t.name,n=t.dependencies;n===void 0&&(n=[]);var i=t.init;i===void 0&&(i=function(){});var s=t.getTransferables;if(s===void 0&&(s=null),!f[a])try{n=n.map(function(d){return d&&d.isWorkerModule&&(r(d,function(h){if(h instanceof Error)throw h}),d=f[d.id].value),d}),i=l("<"+o+">.init",i),s&&(s=l("<"+o+">.getTransferables",s));var c=null;typeof i=="function"?c=i.apply(void 0,n):console.error("worker module init function failed to rehydrate"),f[a]={id:a,value:c,getTransferables:s},e(c)}catch(d){d&&d.noLog||console.error(d),e(d)}}function u(t,e){var a,o=t.id,n=t.args;(!f[o]||typeof f[o].value!="function")&&e(new Error("Worker module "+o+": not found or its 'init' did not return a function"));try{var i=(a=f[o]).value.apply(a,n);i&&typeof i.then=="function"?i.then(s,function(c){return e(c instanceof Error?c:new Error(""+c))}):s(i)}catch(c){e(c)}function s(c){try{var d=f[o].getTransferables&&f[o].getTransferables(c);(!d||!Array.isArray(d)||!d.length)&&(d=void 0),e(c,d)}catch(h){console.error(h),e(h)}}}function l(t,e){var a=void 0;self.troikaDefine=function(n){return a=n};var o=URL.createObjectURL(new Blob(["/** "+t.replace(/\*/g,"")+` **/

troikaDefine(
`+e+`
)`],{type:"application/javascript"}));try{importScripts(o)}catch(n){console.error(n)}return URL.revokeObjectURL(o),delete self.troikaDefine,a}self.addEventListener("message",function(t){var e=t.data,a=e.messageId,o=e.action,n=e.data;try{o==="registerModule"&&r(n,function(i){i instanceof Error?postMessage({messageId:a,success:!1,error:i.message}):postMessage({messageId:a,success:!0,result:{isCallable:typeof i=="function"}})}),o==="callModule"&&u(n,function(i,s){i instanceof Error?postMessage({messageId:a,success:!1,error:i.message}):postMessage({messageId:a,success:!0,result:i},s||void 0)})}catch(i){postMessage({messageId:a,success:!1,error:i.stack})}})}function zo(f){var r=function(){for(var u=[],l=arguments.length;l--;)u[l]=arguments[l];return r._getInitResult().then(function(t){if(typeof t=="function")return t.apply(void 0,u);throw new Error("Worker module function was called but `init` did not return a callable function")})};return r._getInitResult=function(){var u=f.dependencies,l=f.init;u=Array.isArray(u)?u.map(function(e){return e&&e._getInitResult?e._getInitResult():e}):[];var t=Promise.all(u).then(function(e){return l.apply(null,e)});return r._getInitResult=function(){return t},t},r}var Sa=function(){var f=!1;if(typeof window<"u"&&typeof window.document<"u")try{var r=new Worker(URL.createObjectURL(new Blob([""],{type:"application/javascript"})));r.terminate(),f=!0}catch(u){typeof process<"u",console.log("Troika createWorkerModule: web workers not allowed; falling back to main thread execution. Cause: ["+u.message+"]")}return Sa=function(){return f},f},jo=0,Vo=0,Dr=!1,It=Object.create(null),Wt=Object.create(null),Br=Object.create(null);function jt(f){if((!f||typeof f.init!="function")&&!Dr)throw new Error("requires `options.init` function");var r=f.dependencies,u=f.init,l=f.getTransferables,t=f.workerId;if(!Sa())return zo(f);t==null&&(t="#default");var e="workerModule"+ ++jo,a=f.name||e,o=null;r=r&&r.map(function(i){return typeof i=="function"&&!i.workerModuleData&&(Dr=!0,i=jt({workerId:t,name:"<"+a+"> function dependency: "+i.name,init:`function(){return (
`+sr(i)+`
)}`}),Dr=!1),i&&i.workerModuleData&&(i=i.workerModuleData),i});function n(){for(var i=[],s=arguments.length;s--;)i[s]=arguments[s];if(!o){o=na(t,"registerModule",n.workerModuleData);var c=function(){o=null,Wt[t].delete(c)};(Wt[t]||(Wt[t]=new Set)).add(c)}return o.then(function(d){var h=d.isCallable;if(h)return na(t,"callModule",{id:e,args:i});throw new Error("Worker module function was called but `init` did not return a callable function")})}return n.workerModuleData={isWorkerModule:!0,id:e,name:a,dependencies:r,init:sr(u),getTransferables:l&&sr(l)},n}function Xo(f){Wt[f]&&Wt[f].forEach(function(r){r()}),It[f]&&(It[f].terminate(),delete It[f])}function sr(f){var r=f.toString();return!/^function/.test(r)&&/^\w+\s*\(/.test(r)&&(r="function "+r),r}function Yo(f){var r=It[f];if(!r){var u=sr(No);r=It[f]=new Worker(URL.createObjectURL(new Blob(["/** Worker Module Bootstrap: "+f.replace(/\*/g,"")+` **/

;(`+u+")()"],{type:"application/javascript"}))),r.onmessage=function(l){var t=l.data,e=t.messageId,a=Br[e];if(!a)throw new Error("WorkerModule response with empty or unknown messageId");delete Br[e],a(t)}}return r}function na(f,r,u){return new Promise(function(l,t){var e=++Vo;Br[e]=function(a){a.success?l(a.result):t(new Error("Error in worker "+r+" call: "+a.error))},Yo(f).postMessage({messageId:e,action:r,data:u})})}function xa(){var f=function(r){function u(O,j,g,F,G,R,A,W){var C=1-A;W.x=C*C*O+2*C*A*g+A*A*G,W.y=C*C*j+2*C*A*F+A*A*R}function l(O,j,g,F,G,R,A,W,C,D){var X=1-C;D.x=X*X*X*O+3*X*X*C*g+3*X*C*C*G+C*C*C*A,D.y=X*X*X*j+3*X*X*C*F+3*X*C*C*R+C*C*C*W}function t(O,j){for(var g=/([MLQCZ])([^MLQCZ]*)/g,F,G,R,A,W;F=g.exec(O);){var C=F[2].replace(/^\s*|\s*$/g,"").split(/[,\s]+/).map(function(D){return parseFloat(D)});switch(F[1]){case"M":A=G=C[0],W=R=C[1];break;case"L":(C[0]!==A||C[1]!==W)&&j("L",A,W,A=C[0],W=C[1]);break;case"Q":{j("Q",A,W,A=C[2],W=C[3],C[0],C[1]);break}case"C":{j("C",A,W,A=C[4],W=C[5],C[0],C[1],C[2],C[3]);break}case"Z":(A!==G||W!==R)&&j("L",A,W,G,R);break}}}function e(O,j,g){g===void 0&&(g=16);var F={x:0,y:0};t(O,function(G,R,A,W,C,D,X,Z,Y){switch(G){case"L":j(R,A,W,C);break;case"Q":{for(var E=R,he=A,ce=1;ce<g;ce++)u(R,A,D,X,W,C,ce/(g-1),F),j(E,he,F.x,F.y),E=F.x,he=F.y;break}case"C":{for(var H=R,$=A,fe=1;fe<g;fe++)l(R,A,D,X,Z,Y,W,C,fe/(g-1),F),j(H,$,F.x,F.y),H=F.x,$=F.y;break}}})}var a="precision highp float;attribute vec2 aUV;varying vec2 vUV;void main(){vUV=aUV;gl_Position=vec4(mix(vec2(-1.0),vec2(1.0),aUV),0.0,1.0);}",o="precision highp float;uniform sampler2D tex;varying vec2 vUV;void main(){gl_FragColor=texture2D(tex,vUV);}",n=new WeakMap,i={premultipliedAlpha:!1,preserveDrawingBuffer:!0,antialias:!1,depth:!1};function s(O,j){var g=O.getContext?O.getContext("webgl",i):O,F=n.get(g);if(!F){let X=function(H){var $=R[H];if(!$&&($=R[H]=g.getExtension(H),!$))throw new Error(H+" not supported");return $},Z=function(H,$){var fe=g.createShader($);return g.shaderSource(fe,H),g.compileShader(fe),fe},Y=function(H,$,fe,B){if(!A[H]){var re={},K={},P=g.createProgram();g.attachShader(P,Z($,g.VERTEX_SHADER)),g.attachShader(P,Z(fe,g.FRAGMENT_SHADER)),g.linkProgram(P),A[H]={program:P,transaction:function(q){g.useProgram(P),q({setUniform:function(Q,ye){for(var ge=[],te=arguments.length-2;te-- >0;)ge[te]=arguments[te+2];var ue=K[ye]||(K[ye]=g.getUniformLocation(P,ye));g["uniform"+Q].apply(g,[ue].concat(ge))},setAttribute:function(Q,ye,ge,te,ue){var me=re[Q];me||(me=re[Q]={buf:g.createBuffer(),loc:g.getAttribLocation(P,Q),data:null}),g.bindBuffer(g.ARRAY_BUFFER,me.buf),g.vertexAttribPointer(me.loc,ye,g.FLOAT,!1,0,0),g.enableVertexAttribArray(me.loc),G?g.vertexAttribDivisor(me.loc,te):X("ANGLE_instanced_arrays").vertexAttribDivisorANGLE(me.loc,te),ue!==me.data&&(g.bufferData(g.ARRAY_BUFFER,ue,ge),me.data=ue)}})}}}A[H].transaction(B)},E=function(H,$){C++;try{g.activeTexture(g.TEXTURE0+C);var fe=W[H];fe||(fe=W[H]=g.createTexture(),g.bindTexture(g.TEXTURE_2D,fe),g.texParameteri(g.TEXTURE_2D,g.TEXTURE_MIN_FILTER,g.NEAREST),g.texParameteri(g.TEXTURE_2D,g.TEXTURE_MAG_FILTER,g.NEAREST)),g.bindTexture(g.TEXTURE_2D,fe),$(fe,C)}finally{C--}},he=function(H,$,fe){var B=g.createFramebuffer();D.push(B),g.bindFramebuffer(g.FRAMEBUFFER,B),g.activeTexture(g.TEXTURE0+$),g.bindTexture(g.TEXTURE_2D,H),g.framebufferTexture2D(g.FRAMEBUFFER,g.COLOR_ATTACHMENT0,g.TEXTURE_2D,H,0);try{fe(B)}finally{g.deleteFramebuffer(B),g.bindFramebuffer(g.FRAMEBUFFER,D[--D.length-1]||null)}},ce=function(){R={},A={},W={},C=-1,D.length=0};var G=typeof WebGL2RenderingContext<"u"&&g instanceof WebGL2RenderingContext,R={},A={},W={},C=-1,D=[];g.canvas.addEventListener("webglcontextlost",function(H){ce(),H.preventDefault()},!1),n.set(g,F={gl:g,isWebGL2:G,getExtension:X,withProgram:Y,withTexture:E,withTextureFramebuffer:he,handleContextLoss:ce})}j(F)}function c(O,j,g,F,G,R,A,W){A===void 0&&(A=15),W===void 0&&(W=null),s(O,function(C){var D=C.gl,X=C.withProgram,Z=C.withTexture;Z("copy",function(Y,E){D.texImage2D(D.TEXTURE_2D,0,D.RGBA,G,R,0,D.RGBA,D.UNSIGNED_BYTE,j),X("copy",a,o,function(he){var ce=he.setUniform,H=he.setAttribute;H("aUV",2,D.STATIC_DRAW,0,new Float32Array([0,0,2,0,0,2])),ce("1i","image",E),D.bindFramebuffer(D.FRAMEBUFFER,W||null),D.disable(D.BLEND),D.colorMask(A&8,A&4,A&2,A&1),D.viewport(g,F,G,R),D.scissor(g,F,G,R),D.drawArrays(D.TRIANGLES,0,3)})})})}function d(O,j,g){var F=O.width,G=O.height;s(O,function(R){var A=R.gl,W=new Uint8Array(F*G*4);A.readPixels(0,0,F,G,A.RGBA,A.UNSIGNED_BYTE,W),O.width=j,O.height=g,c(A,W,0,0,F,G)})}var h=Object.freeze({__proto__:null,withWebGLContext:s,renderImageData:c,resizeWebGLCanvasWithoutClearing:d});function y(O,j,g,F,G,R){R===void 0&&(R=1);var A=new Uint8Array(O*j),W=F[2]-F[0],C=F[3]-F[1],D=[];e(g,function(H,$,fe,B){D.push({x1:H,y1:$,x2:fe,y2:B,minX:Math.min(H,fe),minY:Math.min($,B),maxX:Math.max(H,fe),maxY:Math.max($,B)})}),D.sort(function(H,$){return H.maxX-$.maxX});for(var X=0;X<O;X++)for(var Z=0;Z<j;Z++){var Y=he(F[0]+W*(X+.5)/O,F[1]+C*(Z+.5)/j),E=Math.pow(1-Math.abs(Y)/G,R)/2;Y<0&&(E=1-E),E=Math.max(0,Math.min(255,Math.round(E*255))),A[Z*O+X]=E}return A;function he(H,$){for(var fe=1/0,B=1/0,re=D.length;re--;){var K=D[re];if(K.maxX+B<=H)break;if(H+B>K.minX&&$-B<K.maxY&&$+B>K.minY){var P=S(H,$,K.x1,K.y1,K.x2,K.y2);P<fe&&(fe=P,B=Math.sqrt(fe))}}return ce(H,$)&&(B=-B),B}function ce(H,$){for(var fe=0,B=D.length;B--;){var re=D[B];if(re.maxX<=H)break;var K=re.y1>$!=re.y2>$&&H<(re.x2-re.x1)*($-re.y1)/(re.y2-re.y1)+re.x1;K&&(fe+=re.y1<re.y2?1:-1)}return fe!==0}}function m(O,j,g,F,G,R,A,W,C,D){R===void 0&&(R=1),W===void 0&&(W=0),C===void 0&&(C=0),D===void 0&&(D=0),v(O,j,g,F,G,R,A,null,W,C,D)}function v(O,j,g,F,G,R,A,W,C,D,X){R===void 0&&(R=1),C===void 0&&(C=0),D===void 0&&(D=0),X===void 0&&(X=0);for(var Z=y(O,j,g,F,G,R),Y=new Uint8Array(Z.length*4),E=0;E<Z.length;E++)Y[E*4+X]=Z[E];c(A,Y,C,D,O,j,1<<3-X,W)}function S(O,j,g,F,G,R){var A=G-g,W=R-F,C=A*A+W*W,D=C?Math.max(0,Math.min(1,((O-g)*A+(j-F)*W)/C)):0,X=O-(g+D*A),Z=j-(F+D*W);return X*X+Z*Z}var p=Object.freeze({__proto__:null,generate:y,generateIntoCanvas:m,generateIntoFramebuffer:v}),U="precision highp float;uniform vec4 uGlyphBounds;attribute vec2 aUV;attribute vec4 aLineSegment;varying vec4 vLineSegment;varying vec2 vGlyphXY;void main(){vLineSegment=aLineSegment;vGlyphXY=mix(uGlyphBounds.xy,uGlyphBounds.zw,aUV);gl_Position=vec4(mix(vec2(-1.0),vec2(1.0),aUV),0.0,1.0);}",T="precision highp float;uniform vec4 uGlyphBounds;uniform float uMaxDistance;uniform float uExponent;varying vec4 vLineSegment;varying vec2 vGlyphXY;float absDistToSegment(vec2 point,vec2 lineA,vec2 lineB){vec2 lineDir=lineB-lineA;float lenSq=dot(lineDir,lineDir);float t=lenSq==0.0 ? 0.0 : clamp(dot(point-lineA,lineDir)/lenSq,0.0,1.0);vec2 linePt=lineA+t*lineDir;return distance(point,linePt);}void main(){vec4 seg=vLineSegment;vec2 p=vGlyphXY;float dist=absDistToSegment(p,seg.xy,seg.zw);float val=pow(1.0-clamp(dist/uMaxDistance,0.0,1.0),uExponent)*0.5;bool crossing=(seg.y>p.y!=seg.w>p.y)&&(p.x<(seg.z-seg.x)*(p.y-seg.y)/(seg.w-seg.y)+seg.x);bool crossingUp=crossing&&vLineSegment.y<vLineSegment.w;gl_FragColor=vec4(crossingUp ? 1.0/255.0 : 0.0,crossing&&!crossingUp ? 1.0/255.0 : 0.0,0.0,val);}",_="precision highp float;uniform sampler2D tex;varying vec2 vUV;void main(){vec4 color=texture2D(tex,vUV);bool inside=color.r!=color.g;float val=inside ? 1.0-color.a : color.a;gl_FragColor=vec4(val);}",k=new Float32Array([0,0,2,0,0,2]),x=null,w=!1,I={},N=new WeakMap;function J(O){if(!w&&!z(O))throw new Error("WebGL generation not supported")}function b(O,j,g,F,G,R,A){if(R===void 0&&(R=1),A===void 0&&(A=null),!A&&(A=x,!A)){var W=typeof OffscreenCanvas=="function"?new OffscreenCanvas(1,1):typeof document<"u"?document.createElement("canvas"):null;if(!W)throw new Error("OffscreenCanvas or DOM canvas not supported");A=x=W.getContext("webgl",{depth:!1})}J(A);var C=new Uint8Array(O*j*4);s(A,function(Y){var E=Y.gl,he=Y.withTexture,ce=Y.withTextureFramebuffer;he("readable",function(H,$){E.texImage2D(E.TEXTURE_2D,0,E.RGBA,O,j,0,E.RGBA,E.UNSIGNED_BYTE,null),ce(H,$,function(fe){M(O,j,g,F,G,R,E,fe,0,0,0),E.readPixels(0,0,O,j,E.RGBA,E.UNSIGNED_BYTE,C)})})});for(var D=new Uint8Array(O*j),X=0,Z=0;X<C.length;X+=4)D[Z++]=C[X];return D}function L(O,j,g,F,G,R,A,W,C,D){R===void 0&&(R=1),W===void 0&&(W=0),C===void 0&&(C=0),D===void 0&&(D=0),M(O,j,g,F,G,R,A,null,W,C,D)}function M(O,j,g,F,G,R,A,W,C,D,X){R===void 0&&(R=1),C===void 0&&(C=0),D===void 0&&(D=0),X===void 0&&(X=0),J(A);var Z=[];e(g,function(Y,E,he,ce){Z.push(Y,E,he,ce)}),Z=new Float32Array(Z),s(A,function(Y){var E=Y.gl,he=Y.isWebGL2,ce=Y.getExtension,H=Y.withProgram,$=Y.withTexture,fe=Y.withTextureFramebuffer,B=Y.handleContextLoss;if($("rawDistances",function(re,K){(O!==re._lastWidth||j!==re._lastHeight)&&E.texImage2D(E.TEXTURE_2D,0,E.RGBA,re._lastWidth=O,re._lastHeight=j,0,E.RGBA,E.UNSIGNED_BYTE,null),H("main",U,T,function(P){var ae=P.setAttribute,q=P.setUniform,ne=!he&&ce("ANGLE_instanced_arrays"),Q=!he&&ce("EXT_blend_minmax");ae("aUV",2,E.STATIC_DRAW,0,k),ae("aLineSegment",4,E.DYNAMIC_DRAW,1,Z),q.apply(void 0,["4f","uGlyphBounds"].concat(F)),q("1f","uMaxDistance",G),q("1f","uExponent",R),fe(re,K,function(ye){E.enable(E.BLEND),E.colorMask(!0,!0,!0,!0),E.viewport(0,0,O,j),E.scissor(0,0,O,j),E.blendFunc(E.ONE,E.ONE),E.blendEquationSeparate(E.FUNC_ADD,he?E.MAX:Q.MAX_EXT),E.clear(E.COLOR_BUFFER_BIT),he?E.drawArraysInstanced(E.TRIANGLES,0,3,Z.length/4):ne.drawArraysInstancedANGLE(E.TRIANGLES,0,3,Z.length/4)})}),H("post",a,_,function(P){P.setAttribute("aUV",2,E.STATIC_DRAW,0,k),P.setUniform("1i","tex",K),E.bindFramebuffer(E.FRAMEBUFFER,W),E.disable(E.BLEND),E.colorMask(X===0,X===1,X===2,X===3),E.viewport(C,D,O,j),E.scissor(C,D,O,j),E.drawArrays(E.TRIANGLES,0,3)})}),E.isContextLost())throw B(),new Error("webgl context lost")})}function z(O){var j=!O||O===x?I:O.canvas||O,g=N.get(j);if(g===void 0){w=!0;var F=null;try{var G=[97,106,97,61,99,137,118,80,80,118,137,99,61,97,106,97],R=b(4,4,"M8,8L16,8L24,24L16,24Z",[0,0,32,32],24,1,O);g=R&&G.length===R.length&&R.every(function(A,W){return A===G[W]}),g||(F="bad trial run results",console.info(G,R))}catch(A){g=!1,F=A.message}F&&console.warn("WebGL SDF generation not supported:",F),w=!1,N.set(j,g)}return g}var V=Object.freeze({__proto__:null,generate:b,generateIntoCanvas:L,generateIntoFramebuffer:M,isSupported:z});function se(O,j,g,F,G,R){G===void 0&&(G=Math.max(F[2]-F[0],F[3]-F[1])/2),R===void 0&&(R=1);try{return b.apply(V,arguments)}catch(A){return console.info("WebGL SDF generation failed, falling back to JS",A),y.apply(p,arguments)}}function ie(O,j,g,F,G,R,A,W,C,D){G===void 0&&(G=Math.max(F[2]-F[0],F[3]-F[1])/2),R===void 0&&(R=1),W===void 0&&(W=0),C===void 0&&(C=0),D===void 0&&(D=0);try{return L.apply(V,arguments)}catch(X){return console.info("WebGL SDF generation failed, falling back to JS",X),m.apply(p,arguments)}}return r.forEachPathCommand=t,r.generate=se,r.generateIntoCanvas=ie,r.javascript=p,r.pathToLineSegments=e,r.webgl=V,r.webglUtils=h,Object.defineProperty(r,"__esModule",{value:!0}),r}({});return f}function Ho(){var f=function(r){var u={R:"13k,1a,2,3,3,2+1j,ch+16,a+1,5+2,2+n,5,a,4,6+16,4+3,h+1b,4mo,179q,2+9,2+11,2i9+7y,2+68,4,3+4,5+13,4+3,2+4k,3+29,8+cf,1t+7z,w+17,3+3m,1t+3z,16o1+5r,8+30,8+mc,29+1r,29+4v,75+73",EN:"1c+9,3d+1,6,187+9,513,4+5,7+9,sf+j,175h+9,qw+q,161f+1d,4xt+a,25i+9",ES:"17,2,6dp+1,f+1,av,16vr,mx+1,4o,2",ET:"z+2,3h+3,b+1,ym,3e+1,2o,p4+1,8,6u,7c,g6,1wc,1n9+4,30+1b,2n,6d,qhx+1,h0m,a+1,49+2,63+1,4+1,6bb+3,12jj",AN:"16o+5,2j+9,2+1,35,ed,1ff2+9,87+u",CS:"18,2+1,b,2u,12k,55v,l,17v0,2,3,53,2+1,b",B:"a,3,f+2,2v,690",S:"9,2,k",WS:"c,k,4f4,1vk+a,u,1j,335",ON:"x+1,4+4,h+5,r+5,r+3,z,5+3,2+1,2+1,5,2+2,3+4,o,w,ci+1,8+d,3+d,6+8,2+g,39+1,9,6+1,2,33,b8,3+1,3c+1,7+1,5r,b,7h+3,sa+5,2,3i+6,jg+3,ur+9,2v,ij+1,9g+9,7+a,8m,4+1,49+x,14u,2+2,c+2,e+2,e+2,e+1,i+n,e+e,2+p,u+2,e+2,36+1,2+3,2+1,b,2+2,6+5,2,2,2,h+1,5+4,6+3,3+f,16+2,5+3l,3+81,1y+p,2+40,q+a,m+13,2r+ch,2+9e,75+hf,3+v,2+2w,6e+5,f+6,75+2a,1a+p,2+2g,d+5x,r+b,6+3,4+o,g,6+1,6+2,2k+1,4,2j,5h+z,1m+1,1e+f,t+2,1f+e,d+3,4o+3,2s+1,w,535+1r,h3l+1i,93+2,2s,b+1,3l+x,2v,4g+3,21+3,kz+1,g5v+1,5a,j+9,n+v,2,3,2+8,2+1,3+2,2,3,46+1,4+4,h+5,r+5,r+a,3h+2,4+6,b+4,78,1r+24,4+c,4,1hb,ey+6,103+j,16j+c,1ux+7,5+g,fsh,jdq+1t,4,57+2e,p1,1m,1m,1m,1m,4kt+1,7j+17,5+2r,d+e,3+e,2+e,2+10,m+4,w,1n+5,1q,4z+5,4b+rb,9+c,4+c,4+37,d+2g,8+b,l+b,5+1j,9+9,7+13,9+t,3+1,27+3c,2+29,2+3q,d+d,3+4,4+2,6+6,a+o,8+6,a+2,e+6,16+42,2+1i",BN:"0+8,6+d,2s+5,2+p,e,4m9,1kt+2,2b+5,5+5,17q9+v,7k,6p+8,6+1,119d+3,440+7,96s+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+75,6p+2rz,1ben+1,1ekf+1,1ekf+1",NSM:"lc+33,7o+6,7c+18,2,2+1,2+1,2,21+a,1d+k,h,2u+6,3+5,3+1,2+3,10,v+q,2k+a,1n+8,a,p+3,2+8,2+2,2+4,18+2,3c+e,2+v,1k,2,5+7,5,4+6,b+1,u,1n,5+3,9,l+1,r,3+1,1m,5+1,5+1,3+2,4,v+1,4,c+1,1m,5+4,2+1,5,l+1,n+5,2,1n,3,2+3,9,8+1,c+1,v,1q,d,1f,4,1m+2,6+2,2+3,8+1,c+1,u,1n,g+1,l+1,t+1,1m+1,5+3,9,l+1,u,21,8+2,2,2j,3+6,d+7,2r,3+8,c+5,23+1,s,2,2,1k+d,2+4,2+1,6+a,2+z,a,2v+3,2+5,2+1,3+1,q+1,5+2,h+3,e,3+1,7,g,jk+2,qb+2,u+2,u+1,v+1,1t+1,2+6,9,3+a,a,1a+2,3c+1,z,3b+2,5+1,a,7+2,64+1,3,1n,2+6,2,2,3+7,7+9,3,1d+g,1s+3,1d,2+4,2,6,15+8,d+1,x+3,3+1,2+2,1l,2+1,4,2+2,1n+7,3+1,49+2,2+c,2+6,5,7,4+1,5j+1l,2+4,k1+w,2db+2,3y,2p+v,ff+3,30+1,n9x+3,2+9,x+1,29+1,7l,4,5,q+1,6,48+1,r+h,e,13+7,q+a,1b+2,1d,3+3,3+1,14,1w+5,3+1,3+1,d,9,1c,1g,2+2,3+1,6+1,2,17+1,9,6n,3,5,fn5,ki+f,h+f,r2,6b,46+4,1af+2,2+1,6+3,15+2,5,4m+1,fy+3,as+1,4a+a,4x,1j+e,1l+2,1e+3,3+1,1y+2,11+4,2+7,1r,d+1,1h+8,b+3,3,2o+2,3,2+1,7,4h,4+7,m+1,1m+1,4,12+6,4+4,5g+7,3+2,2,o,2d+5,2,5+1,2+1,6n+3,7+1,2+1,s+1,2e+7,3,2+1,2z,2,3+5,2,2u+2,3+3,2+4,78+8,2+1,75+1,2,5,41+3,3+1,5,x+5,3+1,15+5,3+3,9,a+5,3+2,1b+c,2+1,bb+6,2+5,2d+l,3+6,2+1,2+1,3f+5,4,2+1,2+6,2,21+1,4,2,9o+1,f0c+4,1o+6,t5,1s+3,2a,f5l+1,43t+2,i+7,3+6,v+3,45+2,1j0+1i,5+1d,9,f,n+4,2+e,11t+6,2+g,3+6,2+1,2+4,7a+6,c6+3,15t+6,32+6,gzhy+6n",AL:"16w,3,2,e+1b,z+2,2+2s,g+1,8+1,b+m,2+t,s+2i,c+e,4h+f,1d+1e,1bwe+dp,3+3z,x+c,2+1,35+3y,2rm+z,5+7,b+5,dt+l,c+u,17nl+27,1t+27,4x+6n,3+d",LRO:"6ct",RLO:"6cu",LRE:"6cq",RLE:"6cr",PDF:"6cs",LRI:"6ee",RLI:"6ef",FSI:"6eg",PDI:"6eh"},l={},t={};l.L=1,t[1]="L",Object.keys(u).forEach(function(B,re){l[B]=1<<re+1,t[l[B]]=B}),Object.freeze(l);var e=l.LRI|l.RLI|l.FSI,a=l.L|l.R|l.AL,o=l.B|l.S|l.WS|l.ON|l.FSI|l.LRI|l.RLI|l.PDI,n=l.BN|l.RLE|l.LRE|l.RLO|l.LRO|l.PDF,i=l.S|l.WS|l.B|e|l.PDI|n,s=null;function c(){if(!s){s=new Map;var B=function(K){if(u.hasOwnProperty(K)){var P=0;u[K].split(",").forEach(function(ae){var q=ae.split("+"),ne=q[0],Q=q[1];ne=parseInt(ne,36),Q=Q?parseInt(Q,36):0,s.set(P+=ne,l[K]);for(var ye=0;ye<Q;ye++)s.set(++P,l[K])})}};for(var re in u)B(re)}}function d(B){return c(),s.get(B.codePointAt(0))||l.L}function h(B){return t[d(B)]}var y={pairs:"14>1,1e>2,u>2,2wt>1,1>1,1ge>1,1wp>1,1j>1,f>1,hm>1,1>1,u>1,u6>1,1>1,+5,28>1,w>1,1>1,+3,b8>1,1>1,+3,1>3,-1>-1,3>1,1>1,+2,1s>1,1>1,x>1,th>1,1>1,+2,db>1,1>1,+3,3>1,1>1,+2,14qm>1,1>1,+1,4q>1,1e>2,u>2,2>1,+1",canonical:"6f1>-6dx,6dy>-6dx,6ec>-6ed,6ee>-6ed,6ww>2jj,-2ji>2jj,14r4>-1e7l,1e7m>-1e7l,1e7m>-1e5c,1e5d>-1e5b,1e5c>-14qx,14qy>-14qx,14vn>-1ecg,1ech>-1ecg,1edu>-1ecg,1eci>-1ecg,1eda>-1ecg,1eci>-1ecg,1eci>-168q,168r>-168q,168s>-14ye,14yf>-14ye"};function m(B,re){var K=36,P=0,ae=new Map,q=re&&new Map,ne;return B.split(",").forEach(function Q(ye){if(ye.indexOf("+")!==-1)for(var ge=+ye;ge--;)Q(ne);else{ne=ye;var te=ye.split(">"),ue=te[0],me=te[1];ue=String.fromCodePoint(P+=parseInt(ue,K)),me=String.fromCodePoint(P+=parseInt(me,K)),ae.set(ue,me),re&&q.set(me,ue)}}),{map:ae,reverseMap:q}}var v,S,p;function U(){if(!v){var B=m(y.pairs,!0),re=B.map,K=B.reverseMap;v=re,S=K,p=m(y.canonical,!1).map}}function T(B){return U(),v.get(B)||null}function _(B){return U(),S.get(B)||null}function k(B){return U(),p.get(B)||null}var x=l.L,w=l.R,I=l.EN,N=l.ES,J=l.ET,b=l.AN,L=l.CS,M=l.B,z=l.S,V=l.ON,se=l.BN,ie=l.NSM,O=l.AL,j=l.LRO,g=l.RLO,F=l.LRE,G=l.RLE,R=l.PDF,A=l.LRI,W=l.RLI,C=l.FSI,D=l.PDI;function X(B,re){for(var K=125,P=new Uint32Array(B.length),ae=0;ae<B.length;ae++)P[ae]=d(B[ae]);var q=new Map;function ne(Re,He){var Ge=P[Re];P[Re]=He,q.set(Ge,q.get(Ge)-1),Ge&o&&q.set(o,q.get(o)-1),q.set(He,(q.get(He)||0)+1),He&o&&q.set(o,(q.get(o)||0)+1)}for(var Q=new Uint8Array(B.length),ye=new Map,ge=[],te=null,ue=0;ue<B.length;ue++)te||ge.push(te={start:ue,end:B.length-1,level:re==="rtl"?1:re==="ltr"?0:mn(ue,!1)}),P[ue]&M&&(te.end=ue,te=null);for(var me=G|F|g|j|e|D|R|M,Fe=function(Re){return Re+(Re&1?1:2)},le=function(Re){return Re+(Re&1?2:1)},Ue=0;Ue<ge.length;Ue++){te=ge[Ue];var ve=[{_level:te.level,_override:0,_isolate:0}],oe=void 0,be=0,we=0,Ce=0;q.clear();for(var de=te.start;de<=te.end;de++){var Se=P[de];if(oe=ve[ve.length-1],q.set(Se,(q.get(Se)||0)+1),Se&o&&q.set(o,(q.get(o)||0)+1),Se&me)if(Se&(G|F)){Q[de]=oe._level;var Oe=(Se===G?le:Fe)(oe._level);Oe<=K&&!be&&!we?ve.push({_level:Oe,_override:0,_isolate:0}):be||we++}else if(Se&(g|j)){Q[de]=oe._level;var qe=(Se===g?le:Fe)(oe._level);qe<=K&&!be&&!we?ve.push({_level:qe,_override:Se&g?w:x,_isolate:0}):be||we++}else if(Se&e){Se&C&&(Se=mn(de+1,!0)===1?W:A),Q[de]=oe._level,oe._override&&ne(de,oe._override);var nt=(Se===W?le:Fe)(oe._level);nt<=K&&be===0&&we===0?(Ce++,ve.push({_level:nt,_override:0,_isolate:1,_isolInitIndex:de})):be++}else if(Se&D){if(be>0)be--;else if(Ce>0){for(we=0;!ve[ve.length-1]._isolate;)ve.pop();var $e=ve[ve.length-1]._isolInitIndex;$e!=null&&(ye.set($e,de),ye.set(de,$e)),ve.pop(),Ce--}oe=ve[ve.length-1],Q[de]=oe._level,oe._override&&ne(de,oe._override)}else Se&R?(be===0&&(we>0?we--:!oe._isolate&&ve.length>1&&(ve.pop(),oe=ve[ve.length-1])),Q[de]=oe._level):Se&M&&(Q[de]=te.level);else Q[de]=oe._level,oe._override&&Se!==se&&ne(de,oe._override)}for(var Ne=[],Be=null,xe=te.start;xe<=te.end;xe++){var _t=P[xe];if(!(_t&n)){var ke=Q[xe],Te=_t&e,Ve=_t===D;Be&&ke===Be._level?(Be._end=xe,Be._endsWithIsolInit=Te):Ne.push(Be={_start:xe,_end:xe,_level:ke,_startsWithPDI:Ve,_endsWithIsolInit:Te})}}for(var Ie=[],_e=0;_e<Ne.length;_e++){var Ee=Ne[_e];if(!Ee._startsWithPDI||Ee._startsWithPDI&&!ye.has(Ee._start)){for(var ze=[Be=Ee],Pe=void 0;Be&&Be._endsWithIsolInit&&(Pe=ye.get(Be._end))!=null;)for(var Me=_e+1;Me<Ne.length;Me++)if(Ne[Me]._start===Pe){ze.push(Be=Ne[Me]);break}for(var Le=[],et=0;et<ze.length;et++)for(var Xe=ze[et],at=Xe._start;at<=Xe._end;at++)Le.push(at);for(var Oa=Q[Le[0]],qr=te.level,Vt=Le[0]-1;Vt>=0;Vt--)if(!(P[Vt]&n)){qr=Q[Vt];break}var dr=Le[Le.length-1],La=Q[dr],Zr=te.level;if(!(P[dr]&e)){for(var Xt=dr+1;Xt<=te.end;Xt++)if(!(P[Xt]&n)){Zr=Q[Xt];break}}Ie.push({_seqIndices:Le,_sosType:Math.max(qr,Oa)%2?w:x,_eosType:Math.max(Zr,La)%2?w:x})}}for(var hr=0;hr<Ie.length;hr++){var vr=Ie[hr],ee=vr._seqIndices,wt=vr._sosType,Ra=vr._eosType,lt=Q[ee[0]]&1?w:x;if(q.get(ie))for(var Yt=0;Yt<ee.length;Yt++){var $r=ee[Yt];if(P[$r]&ie){for(var pr=wt,Ht=Yt-1;Ht>=0;Ht--)if(!(P[ee[Ht]]&n)){pr=P[ee[Ht]];break}ne($r,pr&(e|D)?V:pr)}}if(q.get(I))for(var Jt=0;Jt<ee.length;Jt++){var en=ee[Jt];if(P[en]&I)for(var Qt=Jt-1;Qt>=-1;Qt--){var tn=Qt===-1?wt:P[ee[Qt]];if(tn&a){tn===O&&ne(en,b);break}}}if(q.get(O))for(var gr=0;gr<ee.length;gr++){var rn=ee[gr];P[rn]&O&&ne(rn,w)}if(q.get(N)||q.get(L))for(var Ut=1;Ut<ee.length-1;Ut++){var mr=ee[Ut];if(P[mr]&(N|L)){for(var ut=0,yr=0,br=Ut-1;br>=0&&(ut=P[ee[br]],!!(ut&n));br--);for(var _r=Ut+1;_r<ee.length&&(yr=P[ee[_r]],!!(yr&n));_r++);ut===yr&&(P[mr]===N?ut===I:ut&(I|b))&&ne(mr,ut)}}if(q.get(I))for(var Qe=0;Qe<ee.length;Qe++){var Ga=ee[Qe];if(P[Ga]&I){for(var Kt=Qe-1;Kt>=0&&P[ee[Kt]]&(J|n);Kt--)ne(ee[Kt],I);for(Qe++;Qe<ee.length&&P[ee[Qe]]&(J|n|I);Qe++)P[ee[Qe]]!==I&&ne(ee[Qe],I)}}if(q.get(J)||q.get(N)||q.get(L))for(var St=0;St<ee.length;St++){var nn=ee[St];if(P[nn]&(J|N|L)){ne(nn,V);for(var qt=St-1;qt>=0&&P[ee[qt]]&n;qt--)ne(ee[qt],V);for(var Zt=St+1;Zt<ee.length&&P[ee[Zt]]&n;Zt++)ne(ee[Zt],V)}}if(q.get(I))for(var wr=0,an=wt;wr<ee.length;wr++){var on=ee[wr],Ur=P[on];Ur&I?an===x&&ne(on,x):Ur&a&&(an=Ur)}if(q.get(o)){var xt=w|I|b,sn=xt|x,$t=[];{for(var ct=[],dt=0;dt<ee.length;dt++)if(P[ee[dt]]&o){var Tt=B[ee[dt]],fn=void 0;if(T(Tt)!==null)if(ct.length<63)ct.push({char:Tt,seqIndex:dt});else break;else if((fn=_(Tt))!==null)for(var kt=ct.length-1;kt>=0;kt--){var Sr=ct[kt].char;if(Sr===fn||Sr===_(k(Tt))||T(k(Sr))===Tt){$t.push([ct[kt].seqIndex,dt]),ct.length=kt;break}}}$t.sort(function(Re,He){return Re[0]-He[0]})}for(var xr=0;xr<$t.length;xr++){for(var ln=$t[xr],er=ln[0],Tr=ln[1],un=!1,Ye=0,kr=er+1;kr<Tr;kr++){var cn=ee[kr];if(P[cn]&sn){un=!0;var dn=P[cn]&xt?w:x;if(dn===lt){Ye=dn;break}}}if(un&&!Ye){Ye=wt;for(var Fr=er-1;Fr>=0;Fr--){var hn=ee[Fr];if(P[hn]&sn){var vn=P[hn]&xt?w:x;vn!==lt?Ye=vn:Ye=lt;break}}}if(Ye){if(P[ee[er]]=P[ee[Tr]]=Ye,Ye!==lt){for(var Ft=er+1;Ft<ee.length;Ft++)if(!(P[ee[Ft]]&n)){d(B[ee[Ft]])&ie&&(P[ee[Ft]]=Ye);break}}if(Ye!==lt){for(var Ct=Tr+1;Ct<ee.length;Ct++)if(!(P[ee[Ct]]&n)){d(B[ee[Ct]])&ie&&(P[ee[Ct]]=Ye);break}}}}for(var tt=0;tt<ee.length;tt++)if(P[ee[tt]]&o){for(var pn=tt,Cr=tt,Ar=wt,At=tt-1;At>=0;At--)if(P[ee[At]]&n)pn=At;else{Ar=P[ee[At]]&xt?w:x;break}for(var gn=Ra,Mt=tt+1;Mt<ee.length;Mt++)if(P[ee[Mt]]&(o|n))Cr=Mt;else{gn=P[ee[Mt]]&xt?w:x;break}for(var Mr=pn;Mr<=Cr;Mr++)P[ee[Mr]]=Ar===gn?Ar:lt;tt=Cr}}}for(var We=te.start;We<=te.end;We++){var Ba=Q[We],tr=P[We];if(Ba&1?tr&(x|I|b)&&Q[We]++:tr&w?Q[We]++:tr&(b|I)&&(Q[We]+=2),tr&n&&(Q[We]=We===0?te.level:Q[We-1]),We===te.end||d(B[We])&(z|M))for(var rr=We;rr>=0&&d(B[rr])&i;rr--)Q[rr]=te.level}}return{levels:Q,paragraphs:ge};function mn(Re,He){for(var Ge=Re;Ge<B.length;Ge++){var rt=P[Ge];if(rt&(w|O))return 1;if(rt&(M|x)||He&&rt===D)return 0;if(rt&e){var yn=Ia(Ge);Ge=yn===-1?B.length:yn}}return 0}function Ia(Re){for(var He=1,Ge=Re+1;Ge<B.length;Ge++){var rt=P[Ge];if(rt&M)break;if(rt&D){if(--He===0)return Ge}else rt&e&&He++}return-1}}var Z="14>1,j>2,t>2,u>2,1a>g,2v3>1,1>1,1ge>1,1wd>1,b>1,1j>1,f>1,ai>3,-2>3,+1,8>1k0,-1jq>1y7,-1y6>1hf,-1he>1h6,-1h5>1ha,-1h8>1qi,-1pu>1,6>3u,-3s>7,6>1,1>1,f>1,1>1,+2,3>1,1>1,+13,4>1,1>1,6>1eo,-1ee>1,3>1mg,-1me>1mk,-1mj>1mi,-1mg>1mi,-1md>1,1>1,+2,1>10k,-103>1,1>1,4>1,5>1,1>1,+10,3>1,1>8,-7>8,+1,-6>7,+1,a>1,1>1,u>1,u6>1,1>1,+5,26>1,1>1,2>1,2>2,8>1,7>1,4>1,1>1,+5,b8>1,1>1,+3,1>3,-2>1,2>1,1>1,+2,c>1,3>1,1>1,+2,h>1,3>1,a>1,1>1,2>1,3>1,1>1,d>1,f>1,3>1,1a>1,1>1,6>1,7>1,13>1,k>1,1>1,+19,4>1,1>1,+2,2>1,1>1,+18,m>1,a>1,1>1,lk>1,1>1,4>1,2>1,f>1,3>1,1>1,+3,db>1,1>1,+3,3>1,1>1,+2,14qm>1,1>1,+1,6>1,4j>1,j>2,t>2,u>2,2>1,+1",Y;function E(){if(!Y){var B=m(Z,!0),re=B.map,K=B.reverseMap;K.forEach(function(P,ae){re.set(ae,P)}),Y=re}}function he(B){return E(),Y.get(B)||null}function ce(B,re,K,P){var ae=B.length;K=Math.max(0,K==null?0:+K),P=Math.min(ae-1,P==null?ae-1:+P);for(var q=new Map,ne=K;ne<=P;ne++)if(re[ne]&1){var Q=he(B[ne]);Q!==null&&q.set(ne,Q)}return q}function H(B,re,K,P){var ae=B.length;K=Math.max(0,K==null?0:+K),P=Math.min(ae-1,P==null?ae-1:+P);var q=[];return re.paragraphs.forEach(function(ne){var Q=Math.max(K,ne.start),ye=Math.min(P,ne.end);if(Q<ye){for(var ge=re.levels.slice(Q,ye+1),te=ye;te>=Q&&d(B[te])&i;te--)ge[te]=ne.level;for(var ue=ne.level,me=1/0,Fe=0;Fe<ge.length;Fe++){var le=ge[Fe];le>ue&&(ue=le),le<me&&(me=le|1)}for(var Ue=ue;Ue>=me;Ue--)for(var ve=0;ve<ge.length;ve++)if(ge[ve]>=Ue){for(var oe=ve;ve+1<ge.length&&ge[ve+1]>=Ue;)ve++;ve>oe&&q.push([oe+Q,ve+Q])}}}),q}function $(B,re,K,P){var ae=fe(B,re,K,P),q=[].concat(B);return ae.forEach(function(ne,Q){q[Q]=(re.levels[ne]&1?he(B[ne]):null)||B[ne]}),q.join("")}function fe(B,re,K,P){for(var ae=H(B,re,K,P),q=[],ne=0;ne<B.length;ne++)q[ne]=ne;return ae.forEach(function(Q){for(var ye=Q[0],ge=Q[1],te=q.slice(ye,ge+1),ue=te.length;ue--;)q[ge-ue]=te[ue]}),q}return r.closingToOpeningBracket=_,r.getBidiCharType=d,r.getBidiCharTypeName=h,r.getCanonicalBracket=k,r.getEmbeddingLevels=X,r.getMirroredCharacter=he,r.getMirroredCharactersMap=ce,r.getReorderSegments=H,r.getReorderedIndices=fe,r.getReorderedString=$,r.openingToClosingBracket=T,Object.defineProperty(r,"__esModule",{value:!0}),r}({});return f}const Ta=/\bvoid\s+main\s*\(\s*\)\s*{/g;function Ir(f){const r=/^[ \t]*#include +<([\w\d./]+)>/gm;function u(l,t){let e=Ja[t];return e?Ir(e):l}return f.replace(r,u)}const De=[];for(let f=0;f<256;f++)De[f]=(f<16?"0":"")+f.toString(16);function Jo(){const f=Math.random()*4294967295|0,r=Math.random()*4294967295|0,u=Math.random()*4294967295|0,l=Math.random()*4294967295|0;return(De[f&255]+De[f>>8&255]+De[f>>16&255]+De[f>>24&255]+"-"+De[r&255]+De[r>>8&255]+"-"+De[r>>16&15|64]+De[r>>24&255]+"-"+De[u&63|128]+De[u>>8&255]+"-"+De[u>>16&255]+De[u>>24&255]+De[l&255]+De[l>>8&255]+De[l>>16&255]+De[l>>24&255]).toUpperCase()}const it=Object.assign||function(){let f=arguments[0];for(let r=1,u=arguments.length;r<u;r++){let l=arguments[r];if(l)for(let t in l)Object.prototype.hasOwnProperty.call(l,t)&&(f[t]=l[t])}return f},Qo=Date.now(),aa=new WeakMap,oa=new Map;let Ko=1e10;function Wr(f,r){const u=ei(r);let l=aa.get(f);if(l||aa.set(f,l=Object.create(null)),l[u])return new l[u];const t=`_onBeforeCompile${u}`,e=function(i,s){f.onBeforeCompile.call(this,i,s);const c=this.customProgramCacheKey()+"|"+i.vertexShader+"|"+i.fragmentShader;let d=oa[c];if(!d){const h=qo(this,i,r,u);d=oa[c]=h}i.vertexShader=d.vertexShader,i.fragmentShader=d.fragmentShader,it(i.uniforms,this.uniforms),r.timeUniform&&(i.uniforms[r.timeUniform]={get value(){return Date.now()-Qo}}),this[t]&&this[t](i)},a=function(){return o(r.chained?f:f.clone())},o=function(i){const s=Object.create(i,n);return Object.defineProperty(s,"baseMaterial",{value:f}),Object.defineProperty(s,"id",{value:Ko++}),s.uuid=Jo(),s.uniforms=it({},i.uniforms,r.uniforms),s.defines=it({},i.defines,r.defines),s.defines[`TROIKA_DERIVED_MATERIAL_${u}`]="",s.extensions=it({},i.extensions,r.extensions),s._listeners=void 0,s},n={constructor:{value:a},isDerivedMaterial:{value:!0},customProgramCacheKey:{writable:!0,configurable:!0,value:function(){return f.customProgramCacheKey()+"|"+u}},onBeforeCompile:{get(){return e},set(i){this[t]=i}},copy:{writable:!0,configurable:!0,value:function(i){return f.copy.call(this,i),!f.isShaderMaterial&&!f.isDerivedMaterial&&(it(this.extensions,i.extensions),it(this.defines,i.defines),it(this.uniforms,Va.clone(i.uniforms))),this}},clone:{writable:!0,configurable:!0,value:function(){const i=new f.constructor;return o(i).copy(this)}},getDepthMaterial:{writable:!0,configurable:!0,value:function(){let i=this._depthMaterial;return i||(i=this._depthMaterial=Wr(f.isDerivedMaterial?f.getDepthMaterial():new Xa({depthPacking:Ya}),r),i.defines.IS_DEPTH_MATERIAL="",i.uniforms=this.uniforms),i}},getDistanceMaterial:{writable:!0,configurable:!0,value:function(){let i=this._distanceMaterial;return i||(i=this._distanceMaterial=Wr(f.isDerivedMaterial?f.getDistanceMaterial():new Ha,r),i.defines.IS_DISTANCE_MATERIAL="",i.uniforms=this.uniforms),i}},dispose:{writable:!0,configurable:!0,value(){const{_depthMaterial:i,_distanceMaterial:s}=this;i&&i.dispose(),s&&s.dispose(),f.dispose.call(this)}}};return l[u]=a,new a}function qo(f,{vertexShader:r,fragmentShader:u},l,t){let{vertexDefs:e,vertexMainIntro:a,vertexMainOutro:o,vertexTransform:n,fragmentDefs:i,fragmentMainIntro:s,fragmentMainOutro:c,fragmentColorTransform:d,customRewriter:h,timeUniform:y}=l;if(e=e||"",a=a||"",o=o||"",i=i||"",s=s||"",c=c||"",(n||h)&&(r=Ir(r)),(d||h)&&(u=u.replace(/^[ \t]*#include <((?:tonemapping|encodings|fog|premultiplied_alpha|dithering)_fragment)>/gm,`
//!BEGIN_POST_CHUNK $1
$&
//!END_POST_CHUNK
`),u=Ir(u)),h){let m=h({vertexShader:r,fragmentShader:u});r=m.vertexShader,u=m.fragmentShader}if(d){let m=[];u=u.replace(/^\/\/!BEGIN_POST_CHUNK[^]+?^\/\/!END_POST_CHUNK/gm,v=>(m.push(v),"")),c=`${d}
${m.join(`
`)}
${c}`}if(y){const m=`
uniform float ${y};
`;e=m+e,i=m+i}return n&&(r=`vec3 troika_position_${t};
vec3 troika_normal_${t};
vec2 troika_uv_${t};
${r}
`,e=`${e}
void troikaVertexTransform${t}(inout vec3 position, inout vec3 normal, inout vec2 uv) {
  ${n}
}
`,a=`
troika_position_${t} = vec3(position);
troika_normal_${t} = vec3(normal);
troika_uv_${t} = vec2(uv);
troikaVertexTransform${t}(troika_position_${t}, troika_normal_${t}, troika_uv_${t});
${a}
`,r=r.replace(/\b(position|normal|uv)\b/g,(m,v,S,p)=>/\battribute\s+vec[23]\s+$/.test(p.substr(0,S))?v:`troika_${v}_${t}`),f.map&&f.map.channel>0||(r=r.replace(/\bMAP_UV\b/g,`troika_uv_${t}`))),r=ia(r,t,e,a,o),u=ia(u,t,i,s,c),{vertexShader:r,fragmentShader:u}}function ia(f,r,u,l,t){return(l||t||u)&&(f=f.replace(Ta,`
${u}
void troikaOrigMain${r}() {`),f+=`
void main() {
  ${l}
  troikaOrigMain${r}();
  ${t}
}`),f}function Zo(f,r){return f==="uniforms"?void 0:typeof r=="function"?r.toString():r}let $o=0;const sa=new Map;function ei(f){const r=JSON.stringify(f,Zo);let u=sa.get(r);return u==null&&sa.set(r,u=++$o),u}function ti(f,r,u){const{defaultFontURL:l}=u,t=Object.create(null),e=1/0,a=/[\u00AD\u034F\u061C\u115F-\u1160\u17B4-\u17B5\u180B-\u180E\u200B-\u200F\u202A-\u202E\u2060-\u206F\u3164\uFE00-\uFE0F\uFEFF\uFFA0\uFFF0-\uFFF8]/,o="[^\\S\\u00A0]",n=new RegExp(`${o}|[\\-\\u007C\\u00AD\\u2010\\u2012-\\u2014\\u2027\\u2056\\u2E17\\u2E40]`);function i(p,U){function T(){const _=k=>{console.error(`Failure loading font ${p}${p===l?"":"; trying fallback"}`,k),p!==l&&(p=l,T())};try{const k=new XMLHttpRequest;k.open("get",p,!0),k.responseType="arraybuffer",k.onload=function(){if(k.status>=400)_(new Error(k.statusText));else if(k.status>0)try{const x=f(k.response);U(x)}catch(x){_(x)}},k.onerror=_,k.send()}catch(k){_(k)}}T()}function s(p,U){p||(p=l);let T=t[p];T?T.pending?T.pending.push(U):U(T):(t[p]={pending:[U]},i(p,_=>{let k=t[p].pending;t[p]=_,k.forEach(x=>x(_))}))}function c({text:p="",font:U=l,sdfGlyphSize:T=64,fontSize:_=1,letterSpacing:k=0,lineHeight:x="normal",maxWidth:w=e,direction:I,textAlign:N="left",textIndent:J=0,whiteSpace:b="normal",overflowWrap:L="normal",anchorX:M=0,anchorY:z=0,includeCaretPositions:V=!1,chunkedBoundsSize:se=8192,colorRanges:ie=null},O,j=!1){const g=m(),F={fontLoad:0,typesetting:0};p.indexOf("\r")>-1&&(console.info("Typesetter: got text with \\r chars; normalizing to \\n"),p=p.replace(/\r\n/g,`
`).replace(/\r/g,`
`)),_=+_,k=+k,w=+w,x=x||"normal",J=+J,s(U,G=>{const R=isFinite(w);let A=null,W=null,C=null,D=null,X=null,Z=null,Y=null,E=0,he=0,ce=b!=="nowrap";const{ascender:H,descender:$,unitsPerEm:fe,lineGap:B,capHeight:re,xHeight:K}=G;F.fontLoad=m()-g;const P=m(),ae=_/fe;x==="normal"&&(x=(H-$+B)/fe),x=x*_;const q=(x-(H-$)*ae)/2,ne=-(H*ae+q),Q=Math.min(x,(H-$)*ae),ye=(H+$)/2*ae-Q/2;let ge=J,te=new v;const ue=[te];G.forEachGlyph(p,_,k,(le,Ue,ve)=>{const oe=p.charAt(ve),be=le.advanceWidth*ae,we=te.count;let Ce;if("isEmpty"in le||(le.isWhitespace=!!oe&&new RegExp(o).test(oe),le.canBreakAfter=!!oe&&n.test(oe),le.isEmpty=le.xMin===le.xMax||le.yMin===le.yMax||a.test(oe)),!le.isWhitespace&&!le.isEmpty&&he++,ce&&R&&!le.isWhitespace&&Ue+be+ge>w&&we){if(te.glyphAt(we-1).glyphObj.canBreakAfter)Ce=new v,ge=-Ue;else for(let Se=we;Se--;)if(Se===0&&L==="break-word"){Ce=new v,ge=-Ue;break}else if(te.glyphAt(Se).glyphObj.canBreakAfter){Ce=te.splitAt(Se+1);const Oe=Ce.glyphAt(0).x;ge-=Oe;for(let qe=Ce.count;qe--;)Ce.glyphAt(qe).x-=Oe;break}Ce&&(te.isSoftWrapped=!0,te=Ce,ue.push(te),E=w)}let de=te.glyphAt(te.count);de.glyphObj=le,de.x=Ue+ge,de.width=be,de.charIndex=ve,oe===`
`&&(te=new v,ue.push(te),ge=-(Ue+be+k*_)+J)}),ue.forEach(le=>{for(let Ue=le.count;Ue--;){let{glyphObj:ve,x:oe,width:be}=le.glyphAt(Ue);if(!ve.isWhitespace){le.width=oe+be,le.width>E&&(E=le.width);return}}});let me=0,Fe=0;if(M&&(typeof M=="number"?me=-M:typeof M=="string"&&(me=-E*(M==="left"?0:M==="center"?.5:M==="right"?1:h(M)))),z){if(typeof z=="number")Fe=-z;else if(typeof z=="string"){let le=ue.length*x;Fe=z==="top"?0:z==="top-baseline"?-ne:z==="top-cap"?-ne-re*ae:z==="top-ex"?-ne-K*ae:z==="middle"?le/2:z==="bottom"?le:z==="bottom-baseline"?le-q+$*ae:h(z)*le}}if(!j){const le=r.getEmbeddingLevels(p,I);A=new Uint16Array(he),W=new Float32Array(he*2),C={},Z=[e,e,-e,-e],Y=[];let Ue=ne;V&&(X=new Float32Array(p.length*3)),ie&&(D=new Uint8Array(he*3));let ve=0,oe=-1,be=-1,we,Ce;if(ue.forEach((de,Se)=>{let{count:Oe,width:qe}=de;if(Oe>0){let nt=0;for(let ke=Oe;ke--&&de.glyphAt(ke).glyphObj.isWhitespace;)nt++;let $e=0,Ne=0;if(N==="center")$e=(E-qe)/2;else if(N==="right")$e=E-qe;else if(N==="justify"&&de.isSoftWrapped){let ke=0;for(let Te=Oe-nt;Te--;)de.glyphAt(Te).glyphObj.isWhitespace&&ke++;Ne=(E-qe)/ke}if(Ne||$e){let ke=0;for(let Te=0;Te<Oe;Te++){let Ve=de.glyphAt(Te);const Ie=Ve.glyphObj;Ve.x+=$e+ke,Ne!==0&&Ie.isWhitespace&&Te<Oe-nt&&(ke+=Ne,Ve.width+=Ne)}}const Be=r.getReorderSegments(p,le,de.glyphAt(0).charIndex,de.glyphAt(de.count-1).charIndex);for(let ke=0;ke<Be.length;ke++){const[Te,Ve]=Be[ke];let Ie=1/0,_e=-1/0;for(let Ee=0;Ee<Oe;Ee++)if(de.glyphAt(Ee).charIndex>=Te){let ze=Ee,Pe=Ee;for(;Pe<Oe;Pe++){let Me=de.glyphAt(Pe);if(Me.charIndex>Ve)break;Pe<Oe-nt&&(Ie=Math.min(Ie,Me.x),_e=Math.max(_e,Me.x+Me.width))}for(let Me=ze;Me<Pe;Me++){const Le=de.glyphAt(Me);Le.x=_e-(Le.x+Le.width-Ie)}break}}let xe;const _t=ke=>xe=ke;for(let ke=0;ke<Oe;ke++){let Te=de.glyphAt(ke);xe=Te.glyphObj;const Ve=xe.index,Ie=le.levels[Te.charIndex]&1;if(Ie){const _e=r.getMirroredCharacter(p[Te.charIndex]);_e&&G.forEachGlyph(_e,0,0,_t)}if(V){const{charIndex:_e}=Te,Ee=Te.x+me,ze=Te.x+Te.width+me;X[_e*3]=Ie?ze:Ee,X[_e*3+1]=Ie?Ee:ze,X[_e*3+2]=Ue+ye+Fe;const Pe=_e-oe;Pe>1&&y(X,oe,Pe),oe=_e}if(ie){const{charIndex:_e}=Te;for(;_e>be;)be++,ie.hasOwnProperty(be)&&(Ce=ie[be])}if(!xe.isWhitespace&&!xe.isEmpty){const _e=ve++;C[Ve]||(C[Ve]={path:xe.path,pathBounds:[xe.xMin,xe.yMin,xe.xMax,xe.yMax]});const Ee=Te.x+me,ze=Ue+Fe;W[_e*2]=Ee,W[_e*2+1]=ze;const Pe=Ee+xe.xMin*ae,Me=ze+xe.yMin*ae,Le=Ee+xe.xMax*ae,et=ze+xe.yMax*ae;Pe<Z[0]&&(Z[0]=Pe),Me<Z[1]&&(Z[1]=Me),Le>Z[2]&&(Z[2]=Le),et>Z[3]&&(Z[3]=et),_e%se===0&&(we={start:_e,end:_e,rect:[e,e,-e,-e]},Y.push(we)),we.end++;const Xe=we.rect;if(Pe<Xe[0]&&(Xe[0]=Pe),Me<Xe[1]&&(Xe[1]=Me),Le>Xe[2]&&(Xe[2]=Le),et>Xe[3]&&(Xe[3]=et),A[_e]=Ve,ie){const at=_e*3;D[at]=Ce>>16&255,D[at+1]=Ce>>8&255,D[at+2]=Ce&255}}}}Ue-=x}),X){const de=p.length-oe;de>1&&y(X,oe,de)}}F.typesetting=m()-P,O({glyphIds:A,glyphPositions:W,glyphData:C,caretPositions:X,caretHeight:Q,glyphColors:D,chunkedBounds:Y,fontSize:_,unitsPerEm:fe,ascender:H*ae,descender:$*ae,capHeight:re*ae,xHeight:K*ae,lineHeight:x,topBaseline:ne,blockBounds:[me,Fe-ue.length*x,me+E,Fe],visibleBounds:Z,timings:F})})}function d(p,U){c(p,T=>{const[_,k,x,w]=T.blockBounds;U({width:x-_,height:w-k})},{metricsOnly:!0})}function h(p){let U=p.match(/^([\d.]+)%$/),T=U?parseFloat(U[1]):NaN;return isNaN(T)?0:T/100}function y(p,U,T){const _=p[U*3],k=p[U*3+1],x=p[U*3+2],w=(k-_)/T;for(let I=0;I<T;I++){const N=(U+I)*3;p[N]=_+w*I,p[N+1]=_+w*(I+1),p[N+2]=x}}function m(){return(self.performance||Date).now()}function v(){this.data=[]}const S=["glyphObj","x","width","charIndex"];return v.prototype={width:0,isSoftWrapped:!1,get count(){return Math.ceil(this.data.length/S.length)},glyphAt(p){let U=v.flyweight;return U.data=this.data,U.index=p,U},splitAt(p){let U=new v;return U.data=this.data.splice(p*S.length),U}},v.flyweight=S.reduce((p,U,T,_)=>(Object.defineProperty(p,U,{get(){return this.data[this.index*S.length+T]},set(k){this.data[this.index*S.length+T]=k}}),p),{data:null,index:0}),{typeset:c,measure:d,loadFont:s}}const st=()=>(self.performance||Date).now(),cr=xa();let fa;function ri(f,r,u,l,t,e,a,o,n,i,s=!0){return s?ai(f,r,u,l,t,e,a,o,n,i).then(null,c=>(fa||(console.warn("WebGL SDF generation failed, falling back to JS",c),fa=!0),ua(f,r,u,l,t,e,a,o,n,i))):ua(f,r,u,l,t,e,a,o,n,i)}const fr=[],ni=5;let Nr=0;function ka(){const f=st();for(;fr.length&&st()-f<ni;)fr.shift()();Nr=fr.length?setTimeout(ka,0):0}const ai=(...f)=>new Promise((r,u)=>{fr.push(()=>{const l=st();try{cr.webgl.generateIntoCanvas(...f),r({timing:st()-l})}catch(t){u(t)}}),Nr||(Nr=setTimeout(ka,0))}),oi=4,ii=2e3,la={};let si=0;function ua(f,r,u,l,t,e,a,o,n,i){const s="TroikaTextSDFGenerator_JS_"+si++%oi;let c=la[s];return c||(c=la[s]={workerModule:jt({name:s,workerId:s,dependencies:[xa,st],init(d,h){const y=d().javascript.generate;return function(...m){const v=h();return{textureData:y(...m),timing:h()-v}}},getTransferables(d){return[d.textureData.buffer]}}),requests:0,idleTimer:null}),c.requests++,clearTimeout(c.idleTimer),c.workerModule(f,r,u,l,t,e).then(({textureData:d,timing:h})=>{const y=st(),m=new Uint8Array(d.length*4);for(let v=0;v<d.length;v++)m[v*4+i]=d[v];return cr.webglUtils.renderImageData(a,m,o,n,f,r,1<<3-i),h+=st()-y,--c.requests===0&&(c.idleTimer=setTimeout(()=>{Xo(s)},ii)),{timing:h}})}function fi(f){f._warm||(cr.webgl.isSupported(f),f._warm=!0)}const li=cr.webglUtils.resizeWebGLCanvasWithoutClearing;/*!
Custom build of Typr.ts (https://github.com/fredli74/Typr.ts) for use in Troika text rendering.
Original MIT license applies: https://github.com/fredli74/Typr.ts/blob/master/LICENSE
*/function ui(){return typeof window>"u"&&(self.window=self),function(f){var r={parse:function(t){var e=r._bin,a=new Uint8Array(t);if(e.readASCII(a,0,4)=="ttcf"){var o=4;e.readUshort(a,o),o+=2,e.readUshort(a,o),o+=2;var n=e.readUint(a,o);o+=4;for(var i=[],s=0;s<n;s++){var c=e.readUint(a,o);o+=4,i.push(r._readFont(a,c))}return i}return[r._readFont(a,0)]},_readFont:function(t,e){var a=r._bin,o=e;a.readFixed(t,e),e+=4;var n=a.readUshort(t,e);e+=2,a.readUshort(t,e),e+=2,a.readUshort(t,e),e+=2,a.readUshort(t,e),e+=2;for(var i=["cmap","head","hhea","maxp","hmtx","name","OS/2","post","loca","glyf","kern","CFF ","GPOS","GSUB","SVG "],s={_data:t,_offset:o},c={},d=0;d<n;d++){var h=a.readASCII(t,e,4);e+=4,a.readUint(t,e),e+=4;var y=a.readUint(t,e);e+=4;var m=a.readUint(t,e);e+=4,c[h]={offset:y,length:m}}for(d=0;d<i.length;d++){var v=i[d];c[v]&&(s[v.trim()]=r[v.trim()].parse(t,c[v].offset,c[v].length,s))}return s},_tabOffset:function(t,e,a){for(var o=r._bin,n=o.readUshort(t,a+4),i=a+12,s=0;s<n;s++){var c=o.readASCII(t,i,4);i+=4,o.readUint(t,i),i+=4;var d=o.readUint(t,i);if(i+=4,o.readUint(t,i),i+=4,c==e)return d}return 0}};r._bin={readFixed:function(t,e){return(t[e]<<8|t[e+1])+(t[e+2]<<8|t[e+3])/65540},readF2dot14:function(t,e){return r._bin.readShort(t,e)/16384},readInt:function(t,e){return r._bin._view(t).getInt32(e)},readInt8:function(t,e){return r._bin._view(t).getInt8(e)},readShort:function(t,e){return r._bin._view(t).getInt16(e)},readUshort:function(t,e){return r._bin._view(t).getUint16(e)},readUshorts:function(t,e,a){for(var o=[],n=0;n<a;n++)o.push(r._bin.readUshort(t,e+2*n));return o},readUint:function(t,e){return r._bin._view(t).getUint32(e)},readUint64:function(t,e){return 4294967296*r._bin.readUint(t,e)+r._bin.readUint(t,e+4)},readASCII:function(t,e,a){for(var o="",n=0;n<a;n++)o+=String.fromCharCode(t[e+n]);return o},readUnicode:function(t,e,a){for(var o="",n=0;n<a;n++){var i=t[e++]<<8|t[e++];o+=String.fromCharCode(i)}return o},_tdec:typeof window<"u"&&window.TextDecoder?new window.TextDecoder:null,readUTF8:function(t,e,a){var o=r._bin._tdec;return o&&e==0&&a==t.length?o.decode(t):r._bin.readASCII(t,e,a)},readBytes:function(t,e,a){for(var o=[],n=0;n<a;n++)o.push(t[e+n]);return o},readASCIIArray:function(t,e,a){for(var o=[],n=0;n<a;n++)o.push(String.fromCharCode(t[e+n]));return o},_view:function(t){return t._dataView||(t._dataView=t.buffer?new DataView(t.buffer,t.byteOffset,t.byteLength):new DataView(new Uint8Array(t).buffer))}},r._lctf={},r._lctf.parse=function(t,e,a,o,n){var i=r._bin,s={},c=e;i.readFixed(t,e),e+=4;var d=i.readUshort(t,e);e+=2;var h=i.readUshort(t,e);e+=2;var y=i.readUshort(t,e);return e+=2,s.scriptList=r._lctf.readScriptList(t,c+d),s.featureList=r._lctf.readFeatureList(t,c+h),s.lookupList=r._lctf.readLookupList(t,c+y,n),s},r._lctf.readLookupList=function(t,e,a){var o=r._bin,n=e,i=[],s=o.readUshort(t,e);e+=2;for(var c=0;c<s;c++){var d=o.readUshort(t,e);e+=2;var h=r._lctf.readLookupTable(t,n+d,a);i.push(h)}return i},r._lctf.readLookupTable=function(t,e,a){var o=r._bin,n=e,i={tabs:[]};i.ltype=o.readUshort(t,e),e+=2,i.flag=o.readUshort(t,e),e+=2;var s=o.readUshort(t,e);e+=2;for(var c=i.ltype,d=0;d<s;d++){var h=o.readUshort(t,e);e+=2;var y=a(t,c,n+h,i);i.tabs.push(y)}return i},r._lctf.numOfOnes=function(t){for(var e=0,a=0;a<32;a++)t>>>a&1&&e++;return e},r._lctf.readClassDef=function(t,e){var a=r._bin,o=[],n=a.readUshort(t,e);if(e+=2,n==1){var i=a.readUshort(t,e);e+=2;var s=a.readUshort(t,e);e+=2;for(var c=0;c<s;c++)o.push(i+c),o.push(i+c),o.push(a.readUshort(t,e)),e+=2}if(n==2){var d=a.readUshort(t,e);for(e+=2,c=0;c<d;c++)o.push(a.readUshort(t,e)),e+=2,o.push(a.readUshort(t,e)),e+=2,o.push(a.readUshort(t,e)),e+=2}return o},r._lctf.getInterval=function(t,e){for(var a=0;a<t.length;a+=3){var o=t[a],n=t[a+1];if(t[a+2],o<=e&&e<=n)return a}return-1},r._lctf.readCoverage=function(t,e){var a=r._bin,o={};o.fmt=a.readUshort(t,e),e+=2;var n=a.readUshort(t,e);return e+=2,o.fmt==1&&(o.tab=a.readUshorts(t,e,n)),o.fmt==2&&(o.tab=a.readUshorts(t,e,3*n)),o},r._lctf.coverageIndex=function(t,e){var a=t.tab;if(t.fmt==1)return a.indexOf(e);if(t.fmt==2){var o=r._lctf.getInterval(a,e);if(o!=-1)return a[o+2]+(e-a[o])}return-1},r._lctf.readFeatureList=function(t,e){var a=r._bin,o=e,n=[],i=a.readUshort(t,e);e+=2;for(var s=0;s<i;s++){var c=a.readASCII(t,e,4);e+=4;var d=a.readUshort(t,e);e+=2;var h=r._lctf.readFeatureTable(t,o+d);h.tag=c.trim(),n.push(h)}return n},r._lctf.readFeatureTable=function(t,e){var a=r._bin,o=e,n={},i=a.readUshort(t,e);e+=2,i>0&&(n.featureParams=o+i);var s=a.readUshort(t,e);e+=2,n.tab=[];for(var c=0;c<s;c++)n.tab.push(a.readUshort(t,e+2*c));return n},r._lctf.readScriptList=function(t,e){var a=r._bin,o=e,n={},i=a.readUshort(t,e);e+=2;for(var s=0;s<i;s++){var c=a.readASCII(t,e,4);e+=4;var d=a.readUshort(t,e);e+=2,n[c.trim()]=r._lctf.readScriptTable(t,o+d)}return n},r._lctf.readScriptTable=function(t,e){var a=r._bin,o=e,n={},i=a.readUshort(t,e);e+=2,n.default=r._lctf.readLangSysTable(t,o+i);var s=a.readUshort(t,e);e+=2;for(var c=0;c<s;c++){var d=a.readASCII(t,e,4);e+=4;var h=a.readUshort(t,e);e+=2,n[d.trim()]=r._lctf.readLangSysTable(t,o+h)}return n},r._lctf.readLangSysTable=function(t,e){var a=r._bin,o={};a.readUshort(t,e),e+=2,o.reqFeature=a.readUshort(t,e),e+=2;var n=a.readUshort(t,e);return e+=2,o.features=a.readUshorts(t,e,n),o},r.CFF={},r.CFF.parse=function(t,e,a){var o=r._bin;(t=new Uint8Array(t.buffer,e,a))[e=0],t[++e],t[++e],t[++e],e++;var n=[];e=r.CFF.readIndex(t,e,n);for(var i=[],s=0;s<n.length-1;s++)i.push(o.readASCII(t,e+n[s],n[s+1]-n[s]));e+=n[n.length-1];var c=[];e=r.CFF.readIndex(t,e,c);var d=[];for(s=0;s<c.length-1;s++)d.push(r.CFF.readDict(t,e+c[s],e+c[s+1]));e+=c[c.length-1];var h=d[0],y=[];e=r.CFF.readIndex(t,e,y);var m=[];for(s=0;s<y.length-1;s++)m.push(o.readASCII(t,e+y[s],y[s+1]-y[s]));if(e+=y[y.length-1],r.CFF.readSubrs(t,e,h),h.CharStrings){e=h.CharStrings,y=[],e=r.CFF.readIndex(t,e,y);var v=[];for(s=0;s<y.length-1;s++)v.push(o.readBytes(t,e+y[s],y[s+1]-y[s]));h.CharStrings=v}if(h.ROS){e=h.FDArray;var S=[];for(e=r.CFF.readIndex(t,e,S),h.FDArray=[],s=0;s<S.length-1;s++){var p=r.CFF.readDict(t,e+S[s],e+S[s+1]);r.CFF._readFDict(t,p,m),h.FDArray.push(p)}e+=S[S.length-1],e=h.FDSelect,h.FDSelect=[];var U=t[e];if(e++,U!=3)throw U;var T=o.readUshort(t,e);for(e+=2,s=0;s<T+1;s++)h.FDSelect.push(o.readUshort(t,e),t[e+2]),e+=3}return h.Encoding&&(h.Encoding=r.CFF.readEncoding(t,h.Encoding,h.CharStrings.length)),h.charset&&(h.charset=r.CFF.readCharset(t,h.charset,h.CharStrings.length)),r.CFF._readFDict(t,h,m),h},r.CFF._readFDict=function(t,e,a){var o;for(var n in e.Private&&(o=e.Private[1],e.Private=r.CFF.readDict(t,o,o+e.Private[0]),e.Private.Subrs&&r.CFF.readSubrs(t,o+e.Private.Subrs,e.Private)),e)["FamilyName","FontName","FullName","Notice","version","Copyright"].indexOf(n)!=-1&&(e[n]=a[e[n]-426+35])},r.CFF.readSubrs=function(t,e,a){var o=r._bin,n=[];e=r.CFF.readIndex(t,e,n);var i,s=n.length;i=s<1240?107:s<33900?1131:32768,a.Bias=i,a.Subrs=[];for(var c=0;c<n.length-1;c++)a.Subrs.push(o.readBytes(t,e+n[c],n[c+1]-n[c]))},r.CFF.tableSE=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,0,111,112,113,114,0,115,116,117,118,119,120,121,122,0,123,0,124,125,126,127,128,129,130,131,0,132,133,0,134,135,136,137,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,138,0,139,0,0,0,0,140,141,142,143,0,0,0,0,0,144,0,0,0,145,0,0,146,147,148,149,0,0,0,0],r.CFF.glyphByUnicode=function(t,e){for(var a=0;a<t.charset.length;a++)if(t.charset[a]==e)return a;return-1},r.CFF.glyphBySE=function(t,e){return e<0||e>255?-1:r.CFF.glyphByUnicode(t,r.CFF.tableSE[e])},r.CFF.readEncoding=function(t,e,a){r._bin;var o=[".notdef"],n=t[e];if(e++,n!=0)throw"error: unknown encoding format: "+n;var i=t[e];e++;for(var s=0;s<i;s++)o.push(t[e+s]);return o},r.CFF.readCharset=function(t,e,a){var o=r._bin,n=[".notdef"],i=t[e];if(e++,i==0)for(var s=0;s<a;s++){var c=o.readUshort(t,e);e+=2,n.push(c)}else{if(i!=1&&i!=2)throw"error: format: "+i;for(;n.length<a;){c=o.readUshort(t,e),e+=2;var d=0;for(i==1?(d=t[e],e++):(d=o.readUshort(t,e),e+=2),s=0;s<=d;s++)n.push(c),c++}}return n},r.CFF.readIndex=function(t,e,a){var o=r._bin,n=o.readUshort(t,e)+1,i=t[e+=2];if(e++,i==1)for(var s=0;s<n;s++)a.push(t[e+s]);else if(i==2)for(s=0;s<n;s++)a.push(o.readUshort(t,e+2*s));else if(i==3)for(s=0;s<n;s++)a.push(16777215&o.readUint(t,e+3*s-1));else if(n!=1)throw"unsupported offset size: "+i+", count: "+n;return(e+=n*i)-1},r.CFF.getCharString=function(t,e,a){var o=r._bin,n=t[e],i=t[e+1];t[e+2],t[e+3],t[e+4];var s=1,c=null,d=null;n<=20&&(c=n,s=1),n==12&&(c=100*n+i,s=2),21<=n&&n<=27&&(c=n,s=1),n==28&&(d=o.readShort(t,e+1),s=3),29<=n&&n<=31&&(c=n,s=1),32<=n&&n<=246&&(d=n-139,s=1),247<=n&&n<=250&&(d=256*(n-247)+i+108,s=2),251<=n&&n<=254&&(d=256*-(n-251)-i-108,s=2),n==255&&(d=o.readInt(t,e+1)/65535,s=5),a.val=d??"o"+c,a.size=s},r.CFF.readCharString=function(t,e,a){for(var o=e+a,n=r._bin,i=[];e<o;){var s=t[e],c=t[e+1];t[e+2],t[e+3],t[e+4];var d=1,h=null,y=null;s<=20&&(h=s,d=1),s==12&&(h=100*s+c,d=2),s!=19&&s!=20||(h=s,d=2),21<=s&&s<=27&&(h=s,d=1),s==28&&(y=n.readShort(t,e+1),d=3),29<=s&&s<=31&&(h=s,d=1),32<=s&&s<=246&&(y=s-139,d=1),247<=s&&s<=250&&(y=256*(s-247)+c+108,d=2),251<=s&&s<=254&&(y=256*-(s-251)-c-108,d=2),s==255&&(y=n.readInt(t,e+1)/65535,d=5),i.push(y??"o"+h),e+=d}return i},r.CFF.readDict=function(t,e,a){for(var o=r._bin,n={},i=[];e<a;){var s=t[e],c=t[e+1];t[e+2],t[e+3],t[e+4];var d=1,h=null,y=null;if(s==28&&(y=o.readShort(t,e+1),d=3),s==29&&(y=o.readInt(t,e+1),d=5),32<=s&&s<=246&&(y=s-139,d=1),247<=s&&s<=250&&(y=256*(s-247)+c+108,d=2),251<=s&&s<=254&&(y=256*-(s-251)-c-108,d=2),s==255)throw y=o.readInt(t,e+1)/65535,d=5,"unknown number";if(s==30){var m=[];for(d=1;;){var v=t[e+d];d++;var S=v>>4,p=15&v;if(S!=15&&m.push(S),p!=15&&m.push(p),p==15)break}for(var U="",T=[0,1,2,3,4,5,6,7,8,9,".","e","e-","reserved","-","endOfNumber"],_=0;_<m.length;_++)U+=T[m[_]];y=parseFloat(U)}s<=21&&(h=["version","Notice","FullName","FamilyName","Weight","FontBBox","BlueValues","OtherBlues","FamilyBlues","FamilyOtherBlues","StdHW","StdVW","escape","UniqueID","XUID","charset","Encoding","CharStrings","Private","Subrs","defaultWidthX","nominalWidthX"][s],d=1,s==12&&(h=["Copyright","isFixedPitch","ItalicAngle","UnderlinePosition","UnderlineThickness","PaintType","CharstringType","FontMatrix","StrokeWidth","BlueScale","BlueShift","BlueFuzz","StemSnapH","StemSnapV","ForceBold",0,0,"LanguageGroup","ExpansionFactor","initialRandomSeed","SyntheticBase","PostScript","BaseFontName","BaseFontBlend",0,0,0,0,0,0,"ROS","CIDFontVersion","CIDFontRevision","CIDFontType","CIDCount","UIDBase","FDArray","FDSelect","FontName"][c],d=2)),h!=null?(n[h]=i.length==1?i[0]:i,i=[]):i.push(y),e+=d}return n},r.cmap={},r.cmap.parse=function(t,e,a){t=new Uint8Array(t.buffer,e,a),e=0;var o=r._bin,n={};o.readUshort(t,e),e+=2;var i=o.readUshort(t,e);e+=2;var s=[];n.tables=[];for(var c=0;c<i;c++){var d=o.readUshort(t,e);e+=2;var h=o.readUshort(t,e);e+=2;var y=o.readUint(t,e);e+=4;var m="p"+d+"e"+h,v=s.indexOf(y);if(v==-1){var S;v=n.tables.length,s.push(y);var p=o.readUshort(t,y);p==0?S=r.cmap.parse0(t,y):p==4?S=r.cmap.parse4(t,y):p==6?S=r.cmap.parse6(t,y):p==12?S=r.cmap.parse12(t,y):console.debug("unknown format: "+p,d,h,y),n.tables.push(S)}if(n[m]!=null)throw"multiple tables for one platform+encoding";n[m]=v}return n},r.cmap.parse0=function(t,e){var a=r._bin,o={};o.format=a.readUshort(t,e),e+=2;var n=a.readUshort(t,e);e+=2,a.readUshort(t,e),e+=2,o.map=[];for(var i=0;i<n-6;i++)o.map.push(t[e+i]);return o},r.cmap.parse4=function(t,e){var a=r._bin,o=e,n={};n.format=a.readUshort(t,e),e+=2;var i=a.readUshort(t,e);e+=2,a.readUshort(t,e),e+=2;var s=a.readUshort(t,e);e+=2;var c=s/2;n.searchRange=a.readUshort(t,e),e+=2,n.entrySelector=a.readUshort(t,e),e+=2,n.rangeShift=a.readUshort(t,e),e+=2,n.endCount=a.readUshorts(t,e,c),e+=2*c,e+=2,n.startCount=a.readUshorts(t,e,c),e+=2*c,n.idDelta=[];for(var d=0;d<c;d++)n.idDelta.push(a.readShort(t,e)),e+=2;for(n.idRangeOffset=a.readUshorts(t,e,c),e+=2*c,n.glyphIdArray=[];e<o+i;)n.glyphIdArray.push(a.readUshort(t,e)),e+=2;return n},r.cmap.parse6=function(t,e){var a=r._bin,o={};o.format=a.readUshort(t,e),e+=2,a.readUshort(t,e),e+=2,a.readUshort(t,e),e+=2,o.firstCode=a.readUshort(t,e),e+=2;var n=a.readUshort(t,e);e+=2,o.glyphIdArray=[];for(var i=0;i<n;i++)o.glyphIdArray.push(a.readUshort(t,e)),e+=2;return o},r.cmap.parse12=function(t,e){var a=r._bin,o={};o.format=a.readUshort(t,e),e+=2,e+=2,a.readUint(t,e),e+=4,a.readUint(t,e),e+=4;var n=a.readUint(t,e);e+=4,o.groups=[];for(var i=0;i<n;i++){var s=e+12*i,c=a.readUint(t,s+0),d=a.readUint(t,s+4),h=a.readUint(t,s+8);o.groups.push([c,d,h])}return o},r.glyf={},r.glyf.parse=function(t,e,a,o){for(var n=[],i=0;i<o.maxp.numGlyphs;i++)n.push(null);return n},r.glyf._parseGlyf=function(t,e){var a=r._bin,o=t._data,n=r._tabOffset(o,"glyf",t._offset)+t.loca[e];if(t.loca[e]==t.loca[e+1])return null;var i={};if(i.noc=a.readShort(o,n),n+=2,i.xMin=a.readShort(o,n),n+=2,i.yMin=a.readShort(o,n),n+=2,i.xMax=a.readShort(o,n),n+=2,i.yMax=a.readShort(o,n),n+=2,i.xMin>=i.xMax||i.yMin>=i.yMax)return null;if(i.noc>0){i.endPts=[];for(var s=0;s<i.noc;s++)i.endPts.push(a.readUshort(o,n)),n+=2;var c=a.readUshort(o,n);if(n+=2,o.length-n<c)return null;i.instructions=a.readBytes(o,n,c),n+=c;var d=i.endPts[i.noc-1]+1;for(i.flags=[],s=0;s<d;s++){var h=o[n];if(n++,i.flags.push(h),(8&h)!=0){var y=o[n];n++;for(var m=0;m<y;m++)i.flags.push(h),s++}}for(i.xs=[],s=0;s<d;s++){var v=(2&i.flags[s])!=0,S=(16&i.flags[s])!=0;v?(i.xs.push(S?o[n]:-o[n]),n++):S?i.xs.push(0):(i.xs.push(a.readShort(o,n)),n+=2)}for(i.ys=[],s=0;s<d;s++)v=(4&i.flags[s])!=0,S=(32&i.flags[s])!=0,v?(i.ys.push(S?o[n]:-o[n]),n++):S?i.ys.push(0):(i.ys.push(a.readShort(o,n)),n+=2);var p=0,U=0;for(s=0;s<d;s++)p+=i.xs[s],U+=i.ys[s],i.xs[s]=p,i.ys[s]=U}else{var T;i.parts=[];do{T=a.readUshort(o,n),n+=2;var _={m:{a:1,b:0,c:0,d:1,tx:0,ty:0},p1:-1,p2:-1};if(i.parts.push(_),_.glyphIndex=a.readUshort(o,n),n+=2,1&T){var k=a.readShort(o,n);n+=2;var x=a.readShort(o,n);n+=2}else k=a.readInt8(o,n),n++,x=a.readInt8(o,n),n++;2&T?(_.m.tx=k,_.m.ty=x):(_.p1=k,_.p2=x),8&T?(_.m.a=_.m.d=a.readF2dot14(o,n),n+=2):64&T?(_.m.a=a.readF2dot14(o,n),n+=2,_.m.d=a.readF2dot14(o,n),n+=2):128&T&&(_.m.a=a.readF2dot14(o,n),n+=2,_.m.b=a.readF2dot14(o,n),n+=2,_.m.c=a.readF2dot14(o,n),n+=2,_.m.d=a.readF2dot14(o,n),n+=2)}while(32&T);if(256&T){var w=a.readUshort(o,n);for(n+=2,i.instr=[],s=0;s<w;s++)i.instr.push(o[n]),n++}}return i},r.GPOS={},r.GPOS.parse=function(t,e,a,o){return r._lctf.parse(t,e,a,o,r.GPOS.subt)},r.GPOS.subt=function(t,e,a,o){var n=r._bin,i=a,s={};if(s.fmt=n.readUshort(t,a),a+=2,e==1||e==2||e==3||e==7||e==8&&s.fmt<=2){var c=n.readUshort(t,a);a+=2,s.coverage=r._lctf.readCoverage(t,c+i)}if(e==1&&s.fmt==1){var d=n.readUshort(t,a);a+=2;var h=r._lctf.numOfOnes(d);d!=0&&(s.pos=r.GPOS.readValueRecord(t,a,d))}else if(e==2&&s.fmt>=1&&s.fmt<=2){d=n.readUshort(t,a),a+=2;var y=n.readUshort(t,a);a+=2,h=r._lctf.numOfOnes(d);var m=r._lctf.numOfOnes(y);if(s.fmt==1){s.pairsets=[];var v=n.readUshort(t,a);a+=2;for(var S=0;S<v;S++){var p=i+n.readUshort(t,a);a+=2;var U=n.readUshort(t,p);p+=2;for(var T=[],_=0;_<U;_++){var k=n.readUshort(t,p);p+=2,d!=0&&(b=r.GPOS.readValueRecord(t,p,d),p+=2*h),y!=0&&(L=r.GPOS.readValueRecord(t,p,y),p+=2*m),T.push({gid2:k,val1:b,val2:L})}s.pairsets.push(T)}}if(s.fmt==2){var x=n.readUshort(t,a);a+=2;var w=n.readUshort(t,a);a+=2;var I=n.readUshort(t,a);a+=2;var N=n.readUshort(t,a);for(a+=2,s.classDef1=r._lctf.readClassDef(t,i+x),s.classDef2=r._lctf.readClassDef(t,i+w),s.matrix=[],S=0;S<I;S++){var J=[];for(_=0;_<N;_++){var b=null,L=null;d!=0&&(b=r.GPOS.readValueRecord(t,a,d),a+=2*h),y!=0&&(L=r.GPOS.readValueRecord(t,a,y),a+=2*m),J.push({val1:b,val2:L})}s.matrix.push(J)}}}else{if(e==9&&s.fmt==1){var M=n.readUshort(t,a);a+=2;var z=n.readUint(t,a);if(a+=4,o.ltype==9)o.ltype=M;else if(o.ltype!=M)throw"invalid extension substitution";return r.GPOS.subt(t,o.ltype,i+z)}console.debug("unsupported GPOS table LookupType",e,"format",s.fmt)}return s},r.GPOS.readValueRecord=function(t,e,a){var o=r._bin,n=[];return n.push(1&a?o.readShort(t,e):0),e+=1&a?2:0,n.push(2&a?o.readShort(t,e):0),e+=2&a?2:0,n.push(4&a?o.readShort(t,e):0),e+=4&a?2:0,n.push(8&a?o.readShort(t,e):0),e+=8&a?2:0,n},r.GSUB={},r.GSUB.parse=function(t,e,a,o){return r._lctf.parse(t,e,a,o,r.GSUB.subt)},r.GSUB.subt=function(t,e,a,o){var n=r._bin,i=a,s={};if(s.fmt=n.readUshort(t,a),a+=2,e!=1&&e!=4&&e!=5&&e!=6)return null;if(e==1||e==4||e==5&&s.fmt<=2||e==6&&s.fmt<=2){var c=n.readUshort(t,a);a+=2,s.coverage=r._lctf.readCoverage(t,i+c)}if(e==1&&s.fmt>=1&&s.fmt<=2){if(s.fmt==1)s.delta=n.readShort(t,a),a+=2;else if(s.fmt==2){var d=n.readUshort(t,a);a+=2,s.newg=n.readUshorts(t,a,d),a+=2*s.newg.length}}else if(e==4){s.vals=[],d=n.readUshort(t,a),a+=2;for(var h=0;h<d;h++){var y=n.readUshort(t,a);a+=2,s.vals.push(r.GSUB.readLigatureSet(t,i+y))}}else if(e==5&&s.fmt==2){if(s.fmt==2){var m=n.readUshort(t,a);a+=2,s.cDef=r._lctf.readClassDef(t,i+m),s.scset=[];var v=n.readUshort(t,a);for(a+=2,h=0;h<v;h++){var S=n.readUshort(t,a);a+=2,s.scset.push(S==0?null:r.GSUB.readSubClassSet(t,i+S))}}}else if(e==6&&s.fmt==3){if(s.fmt==3){for(h=0;h<3;h++){d=n.readUshort(t,a),a+=2;for(var p=[],U=0;U<d;U++)p.push(r._lctf.readCoverage(t,i+n.readUshort(t,a+2*U)));a+=2*d,h==0&&(s.backCvg=p),h==1&&(s.inptCvg=p),h==2&&(s.ahedCvg=p)}d=n.readUshort(t,a),a+=2,s.lookupRec=r.GSUB.readSubstLookupRecords(t,a,d)}}else{if(e==7&&s.fmt==1){var T=n.readUshort(t,a);a+=2;var _=n.readUint(t,a);if(a+=4,o.ltype==9)o.ltype=T;else if(o.ltype!=T)throw"invalid extension substitution";return r.GSUB.subt(t,o.ltype,i+_)}console.debug("unsupported GSUB table LookupType",e,"format",s.fmt)}return s},r.GSUB.readSubClassSet=function(t,e){var a=r._bin.readUshort,o=e,n=[],i=a(t,e);e+=2;for(var s=0;s<i;s++){var c=a(t,e);e+=2,n.push(r.GSUB.readSubClassRule(t,o+c))}return n},r.GSUB.readSubClassRule=function(t,e){var a=r._bin.readUshort,o={},n=a(t,e),i=a(t,e+=2);e+=2,o.input=[];for(var s=0;s<n-1;s++)o.input.push(a(t,e)),e+=2;return o.substLookupRecords=r.GSUB.readSubstLookupRecords(t,e,i),o},r.GSUB.readSubstLookupRecords=function(t,e,a){for(var o=r._bin.readUshort,n=[],i=0;i<a;i++)n.push(o(t,e),o(t,e+2)),e+=4;return n},r.GSUB.readChainSubClassSet=function(t,e){var a=r._bin,o=e,n=[],i=a.readUshort(t,e);e+=2;for(var s=0;s<i;s++){var c=a.readUshort(t,e);e+=2,n.push(r.GSUB.readChainSubClassRule(t,o+c))}return n},r.GSUB.readChainSubClassRule=function(t,e){for(var a=r._bin,o={},n=["backtrack","input","lookahead"],i=0;i<n.length;i++){var s=a.readUshort(t,e);e+=2,i==1&&s--,o[n[i]]=a.readUshorts(t,e,s),e+=2*o[n[i]].length}return s=a.readUshort(t,e),e+=2,o.subst=a.readUshorts(t,e,2*s),e+=2*o.subst.length,o},r.GSUB.readLigatureSet=function(t,e){var a=r._bin,o=e,n=[],i=a.readUshort(t,e);e+=2;for(var s=0;s<i;s++){var c=a.readUshort(t,e);e+=2,n.push(r.GSUB.readLigature(t,o+c))}return n},r.GSUB.readLigature=function(t,e){var a=r._bin,o={chain:[]};o.nglyph=a.readUshort(t,e),e+=2;var n=a.readUshort(t,e);e+=2;for(var i=0;i<n-1;i++)o.chain.push(a.readUshort(t,e)),e+=2;return o},r.head={},r.head.parse=function(t,e,a){var o=r._bin,n={};return o.readFixed(t,e),e+=4,n.fontRevision=o.readFixed(t,e),e+=4,o.readUint(t,e),e+=4,o.readUint(t,e),e+=4,n.flags=o.readUshort(t,e),e+=2,n.unitsPerEm=o.readUshort(t,e),e+=2,n.created=o.readUint64(t,e),e+=8,n.modified=o.readUint64(t,e),e+=8,n.xMin=o.readShort(t,e),e+=2,n.yMin=o.readShort(t,e),e+=2,n.xMax=o.readShort(t,e),e+=2,n.yMax=o.readShort(t,e),e+=2,n.macStyle=o.readUshort(t,e),e+=2,n.lowestRecPPEM=o.readUshort(t,e),e+=2,n.fontDirectionHint=o.readShort(t,e),e+=2,n.indexToLocFormat=o.readShort(t,e),e+=2,n.glyphDataFormat=o.readShort(t,e),e+=2,n},r.hhea={},r.hhea.parse=function(t,e,a){var o=r._bin,n={};return o.readFixed(t,e),e+=4,n.ascender=o.readShort(t,e),e+=2,n.descender=o.readShort(t,e),e+=2,n.lineGap=o.readShort(t,e),e+=2,n.advanceWidthMax=o.readUshort(t,e),e+=2,n.minLeftSideBearing=o.readShort(t,e),e+=2,n.minRightSideBearing=o.readShort(t,e),e+=2,n.xMaxExtent=o.readShort(t,e),e+=2,n.caretSlopeRise=o.readShort(t,e),e+=2,n.caretSlopeRun=o.readShort(t,e),e+=2,n.caretOffset=o.readShort(t,e),e+=2,e+=8,n.metricDataFormat=o.readShort(t,e),e+=2,n.numberOfHMetrics=o.readUshort(t,e),e+=2,n},r.hmtx={},r.hmtx.parse=function(t,e,a,o){for(var n=r._bin,i={aWidth:[],lsBearing:[]},s=0,c=0,d=0;d<o.maxp.numGlyphs;d++)d<o.hhea.numberOfHMetrics&&(s=n.readUshort(t,e),e+=2,c=n.readShort(t,e),e+=2),i.aWidth.push(s),i.lsBearing.push(c);return i},r.kern={},r.kern.parse=function(t,e,a,o){var n=r._bin,i=n.readUshort(t,e);if(e+=2,i==1)return r.kern.parseV1(t,e-2,a,o);var s=n.readUshort(t,e);e+=2;for(var c={glyph1:[],rval:[]},d=0;d<s;d++){e+=2,a=n.readUshort(t,e),e+=2;var h=n.readUshort(t,e);e+=2;var y=h>>>8;if((y&=15)!=0)throw"unknown kern table format: "+y;e=r.kern.readFormat0(t,e,c)}return c},r.kern.parseV1=function(t,e,a,o){var n=r._bin;n.readFixed(t,e),e+=4;var i=n.readUint(t,e);e+=4;for(var s={glyph1:[],rval:[]},c=0;c<i;c++){n.readUint(t,e),e+=4;var d=n.readUshort(t,e);e+=2,n.readUshort(t,e),e+=2;var h=d>>>8;if((h&=15)!=0)throw"unknown kern table format: "+h;e=r.kern.readFormat0(t,e,s)}return s},r.kern.readFormat0=function(t,e,a){var o=r._bin,n=-1,i=o.readUshort(t,e);e+=2,o.readUshort(t,e),e+=2,o.readUshort(t,e),e+=2,o.readUshort(t,e),e+=2;for(var s=0;s<i;s++){var c=o.readUshort(t,e);e+=2;var d=o.readUshort(t,e);e+=2;var h=o.readShort(t,e);e+=2,c!=n&&(a.glyph1.push(c),a.rval.push({glyph2:[],vals:[]}));var y=a.rval[a.rval.length-1];y.glyph2.push(d),y.vals.push(h),n=c}return e},r.loca={},r.loca.parse=function(t,e,a,o){var n=r._bin,i=[],s=o.head.indexToLocFormat,c=o.maxp.numGlyphs+1;if(s==0)for(var d=0;d<c;d++)i.push(n.readUshort(t,e+(d<<1))<<1);if(s==1)for(d=0;d<c;d++)i.push(n.readUint(t,e+(d<<2)));return i},r.maxp={},r.maxp.parse=function(t,e,a){var o=r._bin,n={},i=o.readUint(t,e);return e+=4,n.numGlyphs=o.readUshort(t,e),e+=2,i==65536&&(n.maxPoints=o.readUshort(t,e),e+=2,n.maxContours=o.readUshort(t,e),e+=2,n.maxCompositePoints=o.readUshort(t,e),e+=2,n.maxCompositeContours=o.readUshort(t,e),e+=2,n.maxZones=o.readUshort(t,e),e+=2,n.maxTwilightPoints=o.readUshort(t,e),e+=2,n.maxStorage=o.readUshort(t,e),e+=2,n.maxFunctionDefs=o.readUshort(t,e),e+=2,n.maxInstructionDefs=o.readUshort(t,e),e+=2,n.maxStackElements=o.readUshort(t,e),e+=2,n.maxSizeOfInstructions=o.readUshort(t,e),e+=2,n.maxComponentElements=o.readUshort(t,e),e+=2,n.maxComponentDepth=o.readUshort(t,e),e+=2),n},r.name={},r.name.parse=function(t,e,a){var o=r._bin,n={};o.readUshort(t,e),e+=2;var i=o.readUshort(t,e);e+=2,o.readUshort(t,e);for(var s,c=["copyright","fontFamily","fontSubfamily","ID","fullName","version","postScriptName","trademark","manufacturer","designer","description","urlVendor","urlDesigner","licence","licenceURL","---","typoFamilyName","typoSubfamilyName","compatibleFull","sampleText","postScriptCID","wwsFamilyName","wwsSubfamilyName","lightPalette","darkPalette"],d=e+=2,h=0;h<i;h++){var y=o.readUshort(t,e);e+=2;var m=o.readUshort(t,e);e+=2;var v=o.readUshort(t,e);e+=2;var S=o.readUshort(t,e);e+=2;var p=o.readUshort(t,e);e+=2;var U=o.readUshort(t,e);e+=2;var T,_=c[S],k=d+12*i+U;if(y==0)T=o.readUnicode(t,k,p/2);else if(y==3&&m==0)T=o.readUnicode(t,k,p/2);else if(m==0)T=o.readASCII(t,k,p);else if(m==1)T=o.readUnicode(t,k,p/2);else if(m==3)T=o.readUnicode(t,k,p/2);else{if(y!=1)throw"unknown encoding "+m+", platformID: "+y;T=o.readASCII(t,k,p),console.debug("reading unknown MAC encoding "+m+" as ASCII")}var x="p"+y+","+v.toString(16);n[x]==null&&(n[x]={}),n[x][_!==void 0?_:S]=T,n[x]._lang=v}for(var w in n)if(n[w].postScriptName!=null&&n[w]._lang==1033)return n[w];for(var w in n)if(n[w].postScriptName!=null&&n[w]._lang==0)return n[w];for(var w in n)if(n[w].postScriptName!=null&&n[w]._lang==3084)return n[w];for(var w in n)if(n[w].postScriptName!=null)return n[w];for(var w in n){s=w;break}return console.debug("returning name table with languageID "+n[s]._lang),n[s]},r["OS/2"]={},r["OS/2"].parse=function(t,e,a){var o=r._bin.readUshort(t,e);e+=2;var n={};if(o==0)r["OS/2"].version0(t,e,n);else if(o==1)r["OS/2"].version1(t,e,n);else if(o==2||o==3||o==4)r["OS/2"].version2(t,e,n);else{if(o!=5)throw"unknown OS/2 table version: "+o;r["OS/2"].version5(t,e,n)}return n},r["OS/2"].version0=function(t,e,a){var o=r._bin;return a.xAvgCharWidth=o.readShort(t,e),e+=2,a.usWeightClass=o.readUshort(t,e),e+=2,a.usWidthClass=o.readUshort(t,e),e+=2,a.fsType=o.readUshort(t,e),e+=2,a.ySubscriptXSize=o.readShort(t,e),e+=2,a.ySubscriptYSize=o.readShort(t,e),e+=2,a.ySubscriptXOffset=o.readShort(t,e),e+=2,a.ySubscriptYOffset=o.readShort(t,e),e+=2,a.ySuperscriptXSize=o.readShort(t,e),e+=2,a.ySuperscriptYSize=o.readShort(t,e),e+=2,a.ySuperscriptXOffset=o.readShort(t,e),e+=2,a.ySuperscriptYOffset=o.readShort(t,e),e+=2,a.yStrikeoutSize=o.readShort(t,e),e+=2,a.yStrikeoutPosition=o.readShort(t,e),e+=2,a.sFamilyClass=o.readShort(t,e),e+=2,a.panose=o.readBytes(t,e,10),e+=10,a.ulUnicodeRange1=o.readUint(t,e),e+=4,a.ulUnicodeRange2=o.readUint(t,e),e+=4,a.ulUnicodeRange3=o.readUint(t,e),e+=4,a.ulUnicodeRange4=o.readUint(t,e),e+=4,a.achVendID=[o.readInt8(t,e),o.readInt8(t,e+1),o.readInt8(t,e+2),o.readInt8(t,e+3)],e+=4,a.fsSelection=o.readUshort(t,e),e+=2,a.usFirstCharIndex=o.readUshort(t,e),e+=2,a.usLastCharIndex=o.readUshort(t,e),e+=2,a.sTypoAscender=o.readShort(t,e),e+=2,a.sTypoDescender=o.readShort(t,e),e+=2,a.sTypoLineGap=o.readShort(t,e),e+=2,a.usWinAscent=o.readUshort(t,e),e+=2,a.usWinDescent=o.readUshort(t,e),e+=2},r["OS/2"].version1=function(t,e,a){var o=r._bin;return e=r["OS/2"].version0(t,e,a),a.ulCodePageRange1=o.readUint(t,e),e+=4,a.ulCodePageRange2=o.readUint(t,e),e+=4},r["OS/2"].version2=function(t,e,a){var o=r._bin;return e=r["OS/2"].version1(t,e,a),a.sxHeight=o.readShort(t,e),e+=2,a.sCapHeight=o.readShort(t,e),e+=2,a.usDefault=o.readUshort(t,e),e+=2,a.usBreak=o.readUshort(t,e),e+=2,a.usMaxContext=o.readUshort(t,e),e+=2},r["OS/2"].version5=function(t,e,a){var o=r._bin;return e=r["OS/2"].version2(t,e,a),a.usLowerOpticalPointSize=o.readUshort(t,e),e+=2,a.usUpperOpticalPointSize=o.readUshort(t,e),e+=2},r.post={},r.post.parse=function(t,e,a){var o=r._bin,n={};return n.version=o.readFixed(t,e),e+=4,n.italicAngle=o.readFixed(t,e),e+=4,n.underlinePosition=o.readShort(t,e),e+=2,n.underlineThickness=o.readShort(t,e),e+=2,n},r==null&&(r={}),r.U==null&&(r.U={}),r.U.codeToGlyph=function(t,e){var a=t.cmap,o=-1;if(a.p0e4!=null?o=a.p0e4:a.p3e1!=null?o=a.p3e1:a.p1e0!=null?o=a.p1e0:a.p0e3!=null&&(o=a.p0e3),o==-1)throw"no familiar platform and encoding!";var n=a.tables[o];if(n.format==0)return e>=n.map.length?0:n.map[e];if(n.format==4){for(var i=-1,s=0;s<n.endCount.length;s++)if(e<=n.endCount[s]){i=s;break}return i==-1||n.startCount[i]>e?0:65535&(n.idRangeOffset[i]!=0?n.glyphIdArray[e-n.startCount[i]+(n.idRangeOffset[i]>>1)-(n.idRangeOffset.length-i)]:e+n.idDelta[i])}if(n.format==12){if(e>n.groups[n.groups.length-1][1])return 0;for(s=0;s<n.groups.length;s++){var c=n.groups[s];if(c[0]<=e&&e<=c[1])return c[2]+(e-c[0])}return 0}throw"unknown cmap table format "+n.format},r.U.glyphToPath=function(t,e){var a={cmds:[],crds:[]};if(t.SVG&&t.SVG.entries[e]){var o=t.SVG.entries[e];return o==null?a:(typeof o=="string"&&(o=r.SVG.toPath(o),t.SVG.entries[e]=o),o)}if(t.CFF){var n={x:0,y:0,stack:[],nStems:0,haveWidth:!1,width:t.CFF.Private?t.CFF.Private.defaultWidthX:0,open:!1},i=t.CFF,s=t.CFF.Private;if(i.ROS){for(var c=0;i.FDSelect[c+2]<=e;)c+=2;s=i.FDArray[i.FDSelect[c+1]].Private}r.U._drawCFF(t.CFF.CharStrings[e],n,i,s,a)}else t.glyf&&r.U._drawGlyf(e,t,a);return a},r.U._drawGlyf=function(t,e,a){var o=e.glyf[t];o==null&&(o=e.glyf[t]=r.glyf._parseGlyf(e,t)),o!=null&&(o.noc>-1?r.U._simpleGlyph(o,a):r.U._compoGlyph(o,e,a))},r.U._simpleGlyph=function(t,e){for(var a=0;a<t.noc;a++){for(var o=a==0?0:t.endPts[a-1]+1,n=t.endPts[a],i=o;i<=n;i++){var s=i==o?n:i-1,c=i==n?o:i+1,d=1&t.flags[i],h=1&t.flags[s],y=1&t.flags[c],m=t.xs[i],v=t.ys[i];if(i==o)if(d){if(!h){r.U.P.moveTo(e,m,v);continue}r.U.P.moveTo(e,t.xs[s],t.ys[s])}else h?r.U.P.moveTo(e,t.xs[s],t.ys[s]):r.U.P.moveTo(e,(t.xs[s]+m)/2,(t.ys[s]+v)/2);d?h&&r.U.P.lineTo(e,m,v):y?r.U.P.qcurveTo(e,m,v,t.xs[c],t.ys[c]):r.U.P.qcurveTo(e,m,v,(m+t.xs[c])/2,(v+t.ys[c])/2)}r.U.P.closePath(e)}},r.U._compoGlyph=function(t,e,a){for(var o=0;o<t.parts.length;o++){var n={cmds:[],crds:[]},i=t.parts[o];r.U._drawGlyf(i.glyphIndex,e,n);for(var s=i.m,c=0;c<n.crds.length;c+=2){var d=n.crds[c],h=n.crds[c+1];a.crds.push(d*s.a+h*s.b+s.tx),a.crds.push(d*s.c+h*s.d+s.ty)}for(c=0;c<n.cmds.length;c++)a.cmds.push(n.cmds[c])}},r.U._getGlyphClass=function(t,e){var a=r._lctf.getInterval(e,t);return a==-1?0:e[a+2]},r.U.getPairAdjustment=function(t,e,a){var o=!1;if(t.GPOS)for(var n=t.GPOS,i=n.lookupList,s=n.featureList,c=[],d=0;d<s.length;d++){var h=s[d];if(h.tag=="kern"){o=!0;for(var y=0;y<h.tab.length;y++)if(!c[h.tab[y]]){c[h.tab[y]]=!0;for(var m=i[h.tab[y]],v=0;v<m.tabs.length;v++)if(m.tabs[v]!=null){var S,p=m.tabs[v];if((!p.coverage||(S=r._lctf.coverageIndex(p.coverage,e))!=-1)&&m.ltype!=1){if(m.ltype==2){var U=null;if(p.fmt==1){var T=p.pairsets[S];for(d=0;d<T.length;d++)T[d].gid2==a&&(U=T[d])}else if(p.fmt==2){var _=r.U._getGlyphClass(e,p.classDef1),k=r.U._getGlyphClass(a,p.classDef2);U=p.matrix[_][k]}if(U){var x=0;return U.val1&&U.val1[2]&&(x+=U.val1[2]),U.val2&&U.val2[0]&&(x+=U.val2[0]),x}}}}}}}if(t.kern&&!o){var w=t.kern.glyph1.indexOf(e);if(w!=-1){var I=t.kern.rval[w].glyph2.indexOf(a);if(I!=-1)return t.kern.rval[w].vals[I]}}return 0},r.U._applySubs=function(t,e,a,o){for(var n=t.length-e-1,i=0;i<a.tabs.length;i++)if(a.tabs[i]!=null){var s,c=a.tabs[i];if(!c.coverage||(s=r._lctf.coverageIndex(c.coverage,t[e]))!=-1){if(a.ltype==1)t[e],c.fmt==1?t[e]=t[e]+c.delta:t[e]=c.newg[s];else if(a.ltype==4)for(var d=c.vals[s],h=0;h<d.length;h++){var y=d[h],m=y.chain.length;if(!(m>n)){for(var v=!0,S=0,p=0;p<m;p++){for(;t[e+S+(1+p)]==-1;)S++;y.chain[p]!=t[e+S+(1+p)]&&(v=!1)}if(v){for(t[e]=y.nglyph,p=0;p<m+S;p++)t[e+p+1]=-1;break}}}else if(a.ltype==5&&c.fmt==2)for(var U=r._lctf.getInterval(c.cDef,t[e]),T=c.cDef[U+2],_=c.scset[T],k=0;k<_.length;k++){var x=_[k],w=x.input;if(!(w.length>n)){for(v=!0,p=0;p<w.length;p++){var I=r._lctf.getInterval(c.cDef,t[e+1+p]);if(U==-1&&c.cDef[I+2]!=w[p]){v=!1;break}}if(v){var N=x.substLookupRecords;for(h=0;h<N.length;h+=2)N[h],N[h+1]}}}else if(a.ltype==6&&c.fmt==3){if(!r.U._glsCovered(t,c.backCvg,e-c.backCvg.length)||!r.U._glsCovered(t,c.inptCvg,e)||!r.U._glsCovered(t,c.ahedCvg,e+c.inptCvg.length))continue;var J=c.lookupRec;for(k=0;k<J.length;k+=2){U=J[k];var b=o[J[k+1]];r.U._applySubs(t,e+U,b,o)}}}}},r.U._glsCovered=function(t,e,a){for(var o=0;o<e.length;o++)if(r._lctf.coverageIndex(e[o],t[a+o])==-1)return!1;return!0},r.U.glyphsToPath=function(t,e,a){for(var o={cmds:[],crds:[]},n=0,i=0;i<e.length;i++){var s=e[i];if(s!=-1){for(var c=i<e.length-1&&e[i+1]!=-1?e[i+1]:0,d=r.U.glyphToPath(t,s),h=0;h<d.crds.length;h+=2)o.crds.push(d.crds[h]+n),o.crds.push(d.crds[h+1]);for(a&&o.cmds.push(a),h=0;h<d.cmds.length;h++)o.cmds.push(d.cmds[h]);a&&o.cmds.push("X"),n+=t.hmtx.aWidth[s],i<e.length-1&&(n+=r.U.getPairAdjustment(t,s,c))}}return o},r.U.P={},r.U.P.moveTo=function(t,e,a){t.cmds.push("M"),t.crds.push(e,a)},r.U.P.lineTo=function(t,e,a){t.cmds.push("L"),t.crds.push(e,a)},r.U.P.curveTo=function(t,e,a,o,n,i,s){t.cmds.push("C"),t.crds.push(e,a,o,n,i,s)},r.U.P.qcurveTo=function(t,e,a,o,n){t.cmds.push("Q"),t.crds.push(e,a,o,n)},r.U.P.closePath=function(t){t.cmds.push("Z")},r.U._drawCFF=function(t,e,a,o,n){for(var i=e.stack,s=e.nStems,c=e.haveWidth,d=e.width,h=e.open,y=0,m=e.x,v=e.y,S=0,p=0,U=0,T=0,_=0,k=0,x=0,w=0,I=0,N=0,J={val:0,size:0};y<t.length;){r.CFF.getCharString(t,y,J);var b=J.val;if(y+=J.size,b=="o1"||b=="o18")i.length%2!=0&&!c&&(d=i.shift()+o.nominalWidthX),s+=i.length>>1,i.length=0,c=!0;else if(b=="o3"||b=="o23")i.length%2!=0&&!c&&(d=i.shift()+o.nominalWidthX),s+=i.length>>1,i.length=0,c=!0;else if(b=="o4")i.length>1&&!c&&(d=i.shift()+o.nominalWidthX,c=!0),h&&r.U.P.closePath(n),v+=i.pop(),r.U.P.moveTo(n,m,v),h=!0;else if(b=="o5")for(;i.length>0;)m+=i.shift(),v+=i.shift(),r.U.P.lineTo(n,m,v);else if(b=="o6"||b=="o7")for(var L=i.length,M=b=="o6",z=0;z<L;z++){var V=i.shift();M?m+=V:v+=V,M=!M,r.U.P.lineTo(n,m,v)}else if(b=="o8"||b=="o24"){L=i.length;for(var se=0;se+6<=L;)S=m+i.shift(),p=v+i.shift(),U=S+i.shift(),T=p+i.shift(),m=U+i.shift(),v=T+i.shift(),r.U.P.curveTo(n,S,p,U,T,m,v),se+=6;b=="o24"&&(m+=i.shift(),v+=i.shift(),r.U.P.lineTo(n,m,v))}else{if(b=="o11")break;if(b=="o1234"||b=="o1235"||b=="o1236"||b=="o1237")b=="o1234"&&(p=v,U=(S=m+i.shift())+i.shift(),N=T=p+i.shift(),k=T,w=v,m=(x=(_=(I=U+i.shift())+i.shift())+i.shift())+i.shift(),r.U.P.curveTo(n,S,p,U,T,I,N),r.U.P.curveTo(n,_,k,x,w,m,v)),b=="o1235"&&(S=m+i.shift(),p=v+i.shift(),U=S+i.shift(),T=p+i.shift(),I=U+i.shift(),N=T+i.shift(),_=I+i.shift(),k=N+i.shift(),x=_+i.shift(),w=k+i.shift(),m=x+i.shift(),v=w+i.shift(),i.shift(),r.U.P.curveTo(n,S,p,U,T,I,N),r.U.P.curveTo(n,_,k,x,w,m,v)),b=="o1236"&&(S=m+i.shift(),p=v+i.shift(),U=S+i.shift(),N=T=p+i.shift(),k=T,x=(_=(I=U+i.shift())+i.shift())+i.shift(),w=k+i.shift(),m=x+i.shift(),r.U.P.curveTo(n,S,p,U,T,I,N),r.U.P.curveTo(n,_,k,x,w,m,v)),b=="o1237"&&(S=m+i.shift(),p=v+i.shift(),U=S+i.shift(),T=p+i.shift(),I=U+i.shift(),N=T+i.shift(),_=I+i.shift(),k=N+i.shift(),x=_+i.shift(),w=k+i.shift(),Math.abs(x-m)>Math.abs(w-v)?m=x+i.shift():v=w+i.shift(),r.U.P.curveTo(n,S,p,U,T,I,N),r.U.P.curveTo(n,_,k,x,w,m,v));else if(b=="o14"){if(i.length>0&&!c&&(d=i.shift()+a.nominalWidthX,c=!0),i.length==4){var ie=i.shift(),O=i.shift(),j=i.shift(),g=i.shift(),F=r.CFF.glyphBySE(a,j),G=r.CFF.glyphBySE(a,g);r.U._drawCFF(a.CharStrings[F],e,a,o,n),e.x=ie,e.y=O,r.U._drawCFF(a.CharStrings[G],e,a,o,n)}h&&(r.U.P.closePath(n),h=!1)}else if(b=="o19"||b=="o20")i.length%2!=0&&!c&&(d=i.shift()+o.nominalWidthX),s+=i.length>>1,i.length=0,c=!0,y+=s+7>>3;else if(b=="o21")i.length>2&&!c&&(d=i.shift()+o.nominalWidthX,c=!0),v+=i.pop(),m+=i.pop(),h&&r.U.P.closePath(n),r.U.P.moveTo(n,m,v),h=!0;else if(b=="o22")i.length>1&&!c&&(d=i.shift()+o.nominalWidthX,c=!0),m+=i.pop(),h&&r.U.P.closePath(n),r.U.P.moveTo(n,m,v),h=!0;else if(b=="o25"){for(;i.length>6;)m+=i.shift(),v+=i.shift(),r.U.P.lineTo(n,m,v);S=m+i.shift(),p=v+i.shift(),U=S+i.shift(),T=p+i.shift(),m=U+i.shift(),v=T+i.shift(),r.U.P.curveTo(n,S,p,U,T,m,v)}else if(b=="o26")for(i.length%2&&(m+=i.shift());i.length>0;)S=m,p=v+i.shift(),m=U=S+i.shift(),v=(T=p+i.shift())+i.shift(),r.U.P.curveTo(n,S,p,U,T,m,v);else if(b=="o27")for(i.length%2&&(v+=i.shift());i.length>0;)p=v,U=(S=m+i.shift())+i.shift(),T=p+i.shift(),m=U+i.shift(),v=T,r.U.P.curveTo(n,S,p,U,T,m,v);else if(b=="o10"||b=="o29"){var R=b=="o10"?o:a;if(i.length==0)console.debug("error: empty stack");else{var A=i.pop(),W=R.Subrs[A+R.Bias];e.x=m,e.y=v,e.nStems=s,e.haveWidth=c,e.width=d,e.open=h,r.U._drawCFF(W,e,a,o,n),m=e.x,v=e.y,s=e.nStems,c=e.haveWidth,d=e.width,h=e.open}}else if(b=="o30"||b=="o31"){var C=i.length,D=(se=0,b=="o31");for(se+=C-(L=-3&C);se<L;)D?(p=v,U=(S=m+i.shift())+i.shift(),v=(T=p+i.shift())+i.shift(),L-se==5?(m=U+i.shift(),se++):m=U,D=!1):(S=m,p=v+i.shift(),U=S+i.shift(),T=p+i.shift(),m=U+i.shift(),L-se==5?(v=T+i.shift(),se++):v=T,D=!0),r.U.P.curveTo(n,S,p,U,T,m,v),se+=4}else{if((b+"").charAt(0)=="o")throw console.debug("Unknown operation: "+b,t),b;i.push(b)}}}e.x=m,e.y=v,e.nStems=s,e.haveWidth=c,e.width=d,e.open=h};var u=r,l={Typr:u};return f.Typr=u,f.default=l,Object.defineProperty(f,"__esModule",{value:!0}),f}({}).Typr}/*!
Custom bundle of woff2otf (https://github.com/arty-name/woff2otf) with fflate
(https://github.com/101arrowz/fflate) for use in Troika text rendering. 
Original licenses apply: 
- fflate: https://github.com/101arrowz/fflate/blob/master/LICENSE (MIT)
- woff2otf.js: https://github.com/arty-name/woff2otf/blob/master/woff2otf.js (Apache2)
*/function ci(){return function(f){var r=Uint8Array,u=Uint16Array,l=Uint32Array,t=new r([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),e=new r([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),a=new r([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),o=function(b,L){for(var M=new u(31),z=0;z<31;++z)M[z]=L+=1<<b[z-1];var V=new l(M[30]);for(z=1;z<30;++z)for(var se=M[z];se<M[z+1];++se)V[se]=se-M[z]<<5|z;return[M,V]},n=o(t,2),i=n[0],s=n[1];i[28]=258,s[258]=28;for(var c=o(e,0)[0],d=new u(32768),h=0;h<32768;++h){var y=(43690&h)>>>1|(21845&h)<<1;y=(61680&(y=(52428&y)>>>2|(13107&y)<<2))>>>4|(3855&y)<<4,d[h]=((65280&y)>>>8|(255&y)<<8)>>>1}var m=function(b,L,M){for(var z=b.length,V=0,se=new u(L);V<z;++V)++se[b[V]-1];var ie,O=new u(L);for(V=0;V<L;++V)O[V]=O[V-1]+se[V-1]<<1;if(M){ie=new u(1<<L);var j=15-L;for(V=0;V<z;++V)if(b[V])for(var g=V<<4|b[V],F=L-b[V],G=O[b[V]-1]++<<F,R=G|(1<<F)-1;G<=R;++G)ie[d[G]>>>j]=g}else for(ie=new u(z),V=0;V<z;++V)b[V]&&(ie[V]=d[O[b[V]-1]++]>>>15-b[V]);return ie},v=new r(288);for(h=0;h<144;++h)v[h]=8;for(h=144;h<256;++h)v[h]=9;for(h=256;h<280;++h)v[h]=7;for(h=280;h<288;++h)v[h]=8;var S=new r(32);for(h=0;h<32;++h)S[h]=5;var p=m(v,9,1),U=m(S,5,1),T=function(b){for(var L=b[0],M=1;M<b.length;++M)b[M]>L&&(L=b[M]);return L},_=function(b,L,M){var z=L/8|0;return(b[z]|b[z+1]<<8)>>(7&L)&M},k=function(b,L){var M=L/8|0;return(b[M]|b[M+1]<<8|b[M+2]<<16)>>(7&L)},x=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],w=function(b,L,M){var z=new Error(L||x[b]);if(z.code=b,Error.captureStackTrace&&Error.captureStackTrace(z,w),!M)throw z;return z},I=function(b,L,M){var z=b.length;if(!z||M&&!M.l&&z<5)return L||new r(0);var V=!L||M,se=!M||M.i;M||(M={}),L||(L=new r(3*z));var ie,O=function(oe){var be=L.length;if(oe>be){var we=new r(Math.max(2*be,oe));we.set(L),L=we}},j=M.f||0,g=M.p||0,F=M.b||0,G=M.l,R=M.d,A=M.m,W=M.n,C=8*z;do{if(!G){M.f=j=_(b,g,1);var D=_(b,g+1,3);if(g+=3,!D){var X=b[(K=((ie=g)/8|0)+(7&ie&&1)+4)-4]|b[K-3]<<8,Z=K+X;if(Z>z){se&&w(0);break}V&&O(F+X),L.set(b.subarray(K,Z),F),M.b=F+=X,M.p=g=8*Z;continue}if(D==1)G=p,R=U,A=9,W=5;else if(D==2){var Y=_(b,g,31)+257,E=_(b,g+10,15)+4,he=Y+_(b,g+5,31)+1;g+=14;for(var ce=new r(he),H=new r(19),$=0;$<E;++$)H[a[$]]=_(b,g+3*$,7);g+=3*E;var fe=T(H),B=(1<<fe)-1,re=m(H,fe,1);for($=0;$<he;){var K,P=re[_(b,g,B)];if(g+=15&P,(K=P>>>4)<16)ce[$++]=K;else{var ae=0,q=0;for(K==16?(q=3+_(b,g,3),g+=2,ae=ce[$-1]):K==17?(q=3+_(b,g,7),g+=3):K==18&&(q=11+_(b,g,127),g+=7);q--;)ce[$++]=ae}}var ne=ce.subarray(0,Y),Q=ce.subarray(Y);A=T(ne),W=T(Q),G=m(ne,A,1),R=m(Q,W,1)}else w(1);if(g>C){se&&w(0);break}}V&&O(F+131072);for(var ye=(1<<A)-1,ge=(1<<W)-1,te=g;;te=g){var ue=(ae=G[k(b,g)&ye])>>>4;if((g+=15&ae)>C){se&&w(0);break}if(ae||w(2),ue<256)L[F++]=ue;else{if(ue==256){te=g,G=null;break}var me=ue-254;if(ue>264){var Fe=t[$=ue-257];me=_(b,g,(1<<Fe)-1)+i[$],g+=Fe}var le=R[k(b,g)&ge],Ue=le>>>4;if(le||w(3),g+=15&le,Q=c[Ue],Ue>3&&(Fe=e[Ue],Q+=k(b,g)&(1<<Fe)-1,g+=Fe),g>C){se&&w(0);break}V&&O(F+131072);for(var ve=F+me;F<ve;F+=4)L[F]=L[F-Q],L[F+1]=L[F+1-Q],L[F+2]=L[F+2-Q],L[F+3]=L[F+3-Q];F=ve}}M.l=G,M.p=te,M.b=F,G&&(j=1,M.m=A,M.d=R,M.n=W)}while(!j);return F==L.length?L:function(oe,be,we){(be==null||be<0)&&(be=0),(we==null||we>oe.length)&&(we=oe.length);var Ce=new(oe instanceof u?u:oe instanceof l?l:r)(we-be);return Ce.set(oe.subarray(be,we)),Ce}(L,0,F)},N=new r(0),J=typeof TextDecoder<"u"&&new TextDecoder;try{J.decode(N,{stream:!0})}catch{}return f.convert_streams=function(b){var L=new DataView(b),M=0;function z(){var Y=L.getUint16(M);return M+=2,Y}function V(){var Y=L.getUint32(M);return M+=4,Y}function se(Y){X.setUint16(Z,Y),Z+=2}function ie(Y){X.setUint32(Z,Y),Z+=4}for(var O={signature:V(),flavor:V(),length:V(),numTables:z(),reserved:z(),totalSfntSize:V(),majorVersion:z(),minorVersion:z(),metaOffset:V(),metaLength:V(),metaOrigLength:V(),privOffset:V(),privLength:V()},j=0;Math.pow(2,j)<=O.numTables;)j++;j--;for(var g=16*Math.pow(2,j),F=16*O.numTables-g,G=12,R=[],A=0;A<O.numTables;A++)R.push({tag:V(),offset:V(),compLength:V(),origLength:V(),origChecksum:V()}),G+=16;var W,C=new Uint8Array(12+16*R.length+R.reduce(function(Y,E){return Y+E.origLength+4},0)),D=C.buffer,X=new DataView(D),Z=0;return ie(O.flavor),se(O.numTables),se(g),se(j),se(F),R.forEach(function(Y){ie(Y.tag),ie(Y.origChecksum),ie(G),ie(Y.origLength),Y.outOffset=G,(G+=Y.origLength)%4!=0&&(G+=4-G%4)}),R.forEach(function(Y){var E,he=b.slice(Y.offset,Y.offset+Y.compLength);if(Y.compLength!=Y.origLength){var ce=new Uint8Array(Y.origLength);E=new Uint8Array(he,2),I(E,ce)}else ce=new Uint8Array(he);C.set(ce,Y.outOffset);var H=0;(G=Y.outOffset+Y.origLength)%4!=0&&(H=4-G%4),C.set(new Uint8Array(H).buffer,Y.outOffset+Y.origLength),W=G+H}),D.slice(0,W)},Object.defineProperty(f,"__esModule",{value:!0}),f}({}).convert_streams}function di(f,r){const u={M:2,L:2,Q:4,C:6,Z:0},l={C:"18g,ca,368,1kz",D:"17k,6,2,2+4,5+c,2+6,2+1,10+1,9+f,j+11,2+1,a,2,2+1,15+2,3,j+2,6+3,2+8,2,2,2+1,w+a,4+e,3+3,2,3+2,3+5,23+w,2f+4,3,2+9,2,b,2+3,3,1k+9,6+1,3+1,2+2,2+d,30g,p+y,1,1+1g,f+x,2,sd2+1d,jf3+4,f+3,2+4,2+2,b+3,42,2,4+2,2+1,2,3,t+1,9f+w,2,el+2,2+g,d+2,2l,2+1,5,3+1,2+1,2,3,6,16wm+1v",R:"17m+3,2,2,6+3,m,15+2,2+2,h+h,13,3+8,2,2,3+1,2,p+1,x,5+4,5,a,2,2,3,u,c+2,g+1,5,2+1,4+1,5j,6+1,2,b,2+2,f,2+1,1s+2,2,3+1,7,1ez0,2,2+1,4+4,b,4,3,b,42,2+2,4,3,2+1,2,o+3,ae,ep,x,2o+2,3+1,3,5+1,6",L:"x9u,jff,a,fd,jv",T:"4t,gj+33,7o+4,1+1,7c+18,2,2+1,2+1,2,21+a,2,1b+k,h,2u+6,3+5,3+1,2+3,y,2,v+q,2k+a,1n+8,a,p+3,2+8,2+2,2+4,18+2,3c+e,2+v,1k,2,5+7,5,4+6,b+1,u,1n,5+3,9,l+1,r,3+1,1m,5+1,5+1,3+2,4,v+1,4,c+1,1m,5+4,2+1,5,l+1,n+5,2,1n,3,2+3,9,8+1,c+1,v,1q,d,1f,4,1m+2,6+2,2+3,8+1,c+1,u,1n,3,7,6+1,l+1,t+1,1m+1,5+3,9,l+1,u,21,8+2,2,2j,3+6,d+7,2r,3+8,c+5,23+1,s,2,2,1k+d,2+4,2+1,6+a,2+z,a,2v+3,2+5,2+1,3+1,q+1,5+2,h+3,e,3+1,7,g,jk+2,qb+2,u+2,u+1,v+1,1t+1,2+6,9,3+a,a,1a+2,3c+1,z,3b+2,5+1,a,7+2,64+1,3,1n,2+6,2,2,3+7,7+9,3,1d+d,1,1+1,1s+3,1d,2+4,2,6,15+8,d+1,x+3,3+1,2+2,1l,2+1,4,2+2,1n+7,3+1,49+2,2+c,2+6,5,7,4+1,5j+1l,2+4,ek,3+1,r+4,1e+4,6+5,2p+c,1+3,1,1+2,1+b,2db+2,3y,2p+v,ff+3,30+1,n9x,1+2,2+9,x+1,29+1,7l,4,5,q+1,6,48+1,r+h,e,13+7,q+a,1b+2,1d,3+3,3+1,14,1w+5,3+1,3+1,d,9,1c,1g,2+2,3+1,6+1,2,17+1,9,6n,3,5,fn5,ki+f,h+f,5s,6y+2,ea,6b,46+4,1af+2,2+1,6+3,15+2,5,4m+1,fy+3,as+1,4a+a,4x,1j+e,1l+2,1e+3,3+1,1y+2,11+4,2+7,1r,d+1,1h+8,b+3,3,2o+2,3,2+1,7,4h,4+7,m+1,1m+1,4,12+6,4+4,5g+7,3+2,2,o,2d+5,2,5+1,2+1,6n+3,7+1,2+1,s+1,2e+7,3,2+1,2z,2,3+5,2,2u+2,3+3,2+4,78+8,2+1,75+1,2,5,41+3,3+1,5,x+9,15+5,3+3,9,a+5,3+2,1b+c,2+1,bb+6,2+5,2,2b+l,3+6,2+1,2+1,3f+5,4,2+1,2+6,2,21+1,4,2,9o+1,470+8,at4+4,1o+6,t5,1s+3,2a,f5l+1,2+3,43o+2,a+7,1+7,3+6,v+3,45+2,1j0+1i,5+1d,9,f,n+4,2+e,11t+6,2+g,3+6,2+1,2+4,7a+6,c6+3,15t+6,32+6,1,gzau,v+2n,3l+6n"},t=1,e=2,a=4,o=8,n=16,i=32;let s;function c(_){if(!s){const k={R:e,L:t,D:a,C:n,U:i,T:o};s=new Map;for(let x in l){let w=0;l[x].split(",").forEach(I=>{let[N,J]=I.split("+");N=parseInt(N,36),J=J?parseInt(J,36):0,s.set(w+=N,k[x]);for(let b=J;b--;)s.set(++w,k[x])})}}return s.get(_)||i}const d=1,h=2,y=3,m=4,v=[null,"isol","init","fina","medi"];function S(_){const k=new Uint8Array(_.length);let x=i,w=d,I=-1;for(let N=0;N<_.length;N++){const J=_.codePointAt(N);let b=c(J)|0,L=d;b&o||(x&(t|a|n)?b&(e|a|n)?(L=y,(w===d||w===y)&&k[I]++):b&(t|i)&&(w===h||w===m)&&k[I]--:x&(e|i)&&(w===h||w===m)&&k[I]--,w=k[N]=L,x=b,I=N,J>65535&&N++)}return k}function p(_,k){const x=[];for(let I=0;I<k.length;I++){const N=k.codePointAt(I);N>65535&&I++,x.push(f.U.codeToGlyph(_,N))}const w=_.GSUB;if(w){const{lookupList:I,featureList:N}=w;let J;const b=/^(rlig|liga|mset|isol|init|fina|medi|half|pres|blws)$/,L=[];N.forEach(M=>{if(b.test(M.tag))for(let z=0;z<M.tab.length;z++){if(L[M.tab[z]])continue;L[M.tab[z]]=!0;const V=I[M.tab[z]],se=/^(isol|init|fina|medi)$/.test(M.tag);se&&!J&&(J=S(k));for(let ie=0;ie<x.length;ie++)(!J||!se||v[J[ie]]===M.tag)&&f.U._applySubs(x,ie,V,I)}})}return x}function U(..._){for(let k=0;k<_.length;k++)if(typeof _[k]=="number")return _[k]}function T(_){const k=Object.create(null),x=_["OS/2"],w=_.hhea,I=_.head.unitsPerEm,N=U(x&&x.sTypoAscender,w&&w.ascender,I),J={unitsPerEm:I,ascender:N,descender:U(x&&x.sTypoDescender,w&&w.descender,0),capHeight:U(x&&x.sCapHeight,N),xHeight:U(x&&x.sxHeight,N),lineGap:U(x&&x.sTypoLineGap,w&&w.lineGap),forEachGlyph(b,L,M,z){let V=0;const se=1/J.unitsPerEm*L,ie=p(_,b);let O=0,j=-1;return ie.forEach((g,F)=>{if(g!==-1){let G=k[g];if(!G){const{cmds:R,crds:A}=f.U.glyphToPath(_,g);let W="",C=0;for(let E=0,he=R.length;E<he;E++){const ce=u[R[E]];W+=R[E];for(let H=1;H<=ce;H++)W+=(H>1?",":"")+A[C++]}let D,X,Z,Y;if(A.length){D=X=1/0,Z=Y=-1/0;for(let E=0,he=A.length;E<he;E+=2){let ce=A[E],H=A[E+1];ce<D&&(D=ce),H<X&&(X=H),ce>Z&&(Z=ce),H>Y&&(Y=H)}}else D=Z=X=Y=0;G=k[g]={index:g,advanceWidth:_.hmtx.aWidth[g],xMin:D,yMin:X,xMax:Z,yMax:Y,path:W,pathCommandCount:R.length}}j!==-1&&(V+=f.U.getPairAdjustment(_,j,g)*se),z.call(null,G,V,O),G.advanceWidth&&(V+=G.advanceWidth*se),M&&(V+=M*L),j=g}O+=b.codePointAt(O)>65535?2:1}),V}};return J}return function(k){const x=new Uint8Array(k,0,4),w=f._bin.readASCII(x,0,4);if(w==="wOFF")k=r(k);else if(w==="wOF2")throw new Error("woff2 fonts not supported");return T(f.parse(k)[0])}}const hi=jt({name:"Typr Font Parser",dependencies:[ui,ci,di],init(f,r,u){const l=f(),t=r();return u(l,t)}}),gt={defaultFontURL:"https://fonts.gstatic.com/s/roboto/v18/KFOmCnqEu92Fr1Mu4mxM.woff",sdfGlyphSize:64,sdfMargin:1/16,sdfExponent:9,textureWidth:2048},vi=new Nt;function pt(){return(self.performance||Date).now()}const ca=Object.create(null);function Fa(f,r){f=mi({},f);const u=pt();if(f.font=yi(f.font||gt.defaultFontURL),f.text=""+f.text,f.sdfGlyphSize=f.sdfGlyphSize||gt.sdfGlyphSize,f.colorRanges!=null){let c={};for(let d in f.colorRanges)if(f.colorRanges.hasOwnProperty(d)){let h=f.colorRanges[d];typeof h!="number"&&(h=vi.set(h).getHex()),c[d]=h}f.colorRanges=c}Object.freeze(f);const{textureWidth:l,sdfExponent:t}=gt,{sdfGlyphSize:e}=f,a=l/e*4;let o=ca[e];if(!o){const c=document.createElement("canvas");c.width=l,c.height=e*256/a,o=ca[e]={glyphCount:0,sdfGlyphSize:e,sdfCanvas:c,sdfTexture:new Ka(c,void 0,void 0,void 0,_n,_n),contextLost:!1,glyphsByFont:new Map},o.sdfTexture.generateMipmaps=!1,pi(o)}const{sdfTexture:n,sdfCanvas:i}=o;let s=o.glyphsByFont.get(f.font);s||o.glyphsByFont.set(f.font,s=new Map),_i(f).then(c=>{const{glyphIds:d,glyphPositions:h,fontSize:y,unitsPerEm:m,timings:v}=c,S=[],p=new Float32Array(d.length*4),U=y/m;let T=0,_=0;const k=pt();d.forEach((J,b)=>{let L=s.get(J);if(!L){const{path:se,pathBounds:ie}=c.glyphData[J],O=Math.max(ie[2]-ie[0],ie[3]-ie[1])/e*(gt.sdfMargin*e+.5),j=o.glyphCount++,g=[ie[0]-O,ie[1]-O,ie[2]+O,ie[3]+O];s.set(J,L={path:se,atlasIndex:j,sdfViewBox:g}),S.push(L)}const{sdfViewBox:M}=L,z=h[_++],V=h[_++];p[T++]=z+M[0]*U,p[T++]=V+M[1]*U,p[T++]=z+M[2]*U,p[T++]=V+M[3]*U,d[b]=L.atlasIndex}),v.quads=(v.quads||0)+(pt()-k);const x=pt();v.sdf={};const w=i.height,I=Math.ceil(o.glyphCount/a),N=Math.pow(2,Math.ceil(Math.log2(I*e)));N>w&&(console.info(`Increasing SDF texture size ${w}->${N}`),li(i,l,N),n.dispose()),Promise.all(S.map(J=>Ca(J,o,f.gpuAccelerateSDF).then(({timing:b})=>{v.sdf[J.atlasIndex]=b}))).then(()=>{S.length&&!o.contextLost&&(Aa(o),n.needsUpdate=!0),v.sdfTotal=pt()-x,v.total=pt()-u,r(Object.freeze({parameters:f,sdfTexture:n,sdfGlyphSize:e,sdfExponent:t,glyphBounds:p,glyphAtlasIndices:d,glyphColors:c.glyphColors,caretPositions:c.caretPositions,caretHeight:c.caretHeight,chunkedBounds:c.chunkedBounds,ascender:c.ascender,descender:c.descender,lineHeight:c.lineHeight,capHeight:c.capHeight,xHeight:c.xHeight,topBaseline:c.topBaseline,blockBounds:c.blockBounds,visibleBounds:c.visibleBounds,timings:c.timings}))})}),Promise.resolve().then(()=>{o.contextLost||fi(i)})}function Ca({path:f,atlasIndex:r,sdfViewBox:u},{sdfGlyphSize:l,sdfCanvas:t,contextLost:e},a){if(e)return Promise.resolve({timing:-1});const{textureWidth:o,sdfExponent:n}=gt,i=Math.max(u[2]-u[0],u[3]-u[1]),s=Math.floor(r/4),c=s%(o/l)*l,d=Math.floor(s/(o/l))*l,h=r%4;return ri(l,l,f,u,i,n,t,c,d,h,a)}function pi(f){const r=f.sdfCanvas;r.addEventListener("webglcontextlost",u=>{console.log("Context Lost",u),u.preventDefault(),f.contextLost=!0}),r.addEventListener("webglcontextrestored",u=>{console.log("Context Restored",u),f.contextLost=!1;const l=[];f.glyphsByFont.forEach(t=>{t.forEach(e=>{l.push(Ca(e,f,!0))})}),Promise.all(l).then(()=>{Aa(f),f.sdfTexture.needsUpdate=!0})})}function gi({font:f,characters:r,sdfGlyphSize:u},l){let t=Array.isArray(r)?r.join(`
`):""+r;Fa({font:f,sdfGlyphSize:u,text:t},l)}function mi(f,r){for(let u in r)r.hasOwnProperty(u)&&(f[u]=r[u]);return f}let or;function yi(f){return or||(or=typeof document>"u"?{}:document.createElement("a")),or.href=f,or.href}function Aa(f){if(typeof createImageBitmap!="function"){console.info("Safari<15: applying SDF canvas workaround");const{sdfCanvas:r,sdfTexture:u}=f,{width:l,height:t}=r,e=f.sdfCanvas.getContext("webgl");let a=u.image.data;(!a||a.length!==l*t*4)&&(a=new Uint8Array(l*t*4),u.image={width:l,height:t,data:a},u.flipY=!1,u.isDataTexture=!0),e.readPixels(0,0,l,t,e.RGBA,e.UNSIGNED_BYTE,a)}}const bi=jt({name:"Typesetter",dependencies:[gt,hi,ti,Ho],init(f,r,u,l){const{defaultFontURL:t}=f;return u(r,l(),{defaultFontURL:t})}}),_i=jt({name:"Typesetter",dependencies:[bi],init(f){return function(r){return new Promise(u=>{f.typeset(r,u)})}},getTransferables(f){const r=[f.glyphPositions.buffer,f.glyphIds.buffer];return f.caretPositions&&r.push(f.caretPositions.buffer),f.glyphColors&&r.push(f.glyphColors.buffer),r}}),da={};function wi(f){let r=da[f];if(!r){const u=new Xr(1,1,f,f),l=u.clone(),t=u.attributes,e=l.attributes,a=new ao,o=t.uv.count;for(let n=0;n<o;n++)e.position.array[n*3]*=-1,e.normal.array[n*3+2]*=-1;["position","normal","uv"].forEach(n=>{a.setAttribute(n,new oo([...t[n].array,...e[n].array],t[n].itemSize))}),a.setIndex([...u.index.array,...l.index.array.map(n=>n+o)]),a.translate(.5,.5,0),r=da[f]=a}return r}const Ui="aTroikaGlyphBounds",ha="aTroikaGlyphIndex",Si="aTroikaGlyphColor";class xi extends qa{constructor(){super(),this.detail=1,this.curveRadius=0,this.groups=[{start:0,count:1/0,materialIndex:0},{start:0,count:1/0,materialIndex:1}],this.boundingSphere=new Za,this.boundingBox=new $a}computeBoundingSphere(){}computeBoundingBox(){}setSide(r){const u=this.getIndex().count;this.setDrawRange(r===eo?u/2:0,r===ba?u:u/2)}set detail(r){if(r!==this._detail){this._detail=r,(typeof r!="number"||r<1)&&(r=1);let u=wi(r);["position","normal","uv"].forEach(l=>{this.attributes[l]=u.attributes[l].clone()}),this.setIndex(u.getIndex().clone())}}get detail(){return this._detail}set curveRadius(r){r!==this._curveRadius&&(this._curveRadius=r,this._updateBounds())}get curveRadius(){return this._curveRadius}updateGlyphs(r,u,l,t,e){Pr(this,Ui,r,4),Pr(this,ha,u,1),Pr(this,Si,e,3),this._blockBounds=l,this._chunkedBounds=t,this.instanceCount=u.length,this._updateBounds()}_updateBounds(){const r=this._blockBounds;if(r){const{curveRadius:u,boundingBox:l}=this;if(u){const{PI:t,floor:e,min:a,max:o,sin:n,cos:i}=Math,s=t/2,c=t*2,d=Math.abs(u),h=r[0]/d,y=r[2]/d,m=e((h+s)/c)!==e((y+s)/c)?-d:a(n(h)*d,n(y)*d),v=e((h-s)/c)!==e((y-s)/c)?d:o(n(h)*d,n(y)*d),S=e((h+t)/c)!==e((y+t)/c)?d*2:o(d-i(h)*d,d-i(y)*d);l.min.set(m,r[1],u<0?-S:0),l.max.set(v,r[3],u<0?0:S)}else l.min.set(r[0],r[1],0),l.max.set(r[2],r[3],0);l.getBoundingSphere(this.boundingSphere)}}applyClipRect(r){let u=this.getAttribute(ha).count,l=this._chunkedBounds;if(l)for(let t=l.length;t--;){u=l[t].end;let e=l[t].rect;if(e[1]<r.w&&e[3]>r.y&&e[0]<r.z&&e[2]>r.x)break}this.instanceCount=u}}function Pr(f,r,u,l){const t=f.getAttribute(r);u?t&&t.array.length===u.length?(t.array.set(u),t.needsUpdate=!0):(f.setAttribute(r,new to(u,l)),delete f._maxInstanceCount,f.dispose()):t&&f.deleteAttribute(r)}const Ti=`
uniform vec2 uTroikaSDFTextureSize;
uniform float uTroikaSDFGlyphSize;
uniform vec4 uTroikaTotalBounds;
uniform vec4 uTroikaClipRect;
uniform mat3 uTroikaOrient;
uniform bool uTroikaUseGlyphColors;
uniform float uTroikaDistanceOffset;
uniform float uTroikaBlurRadius;
uniform vec2 uTroikaPositionOffset;
uniform float uTroikaCurveRadius;
attribute vec4 aTroikaGlyphBounds;
attribute float aTroikaGlyphIndex;
attribute vec3 aTroikaGlyphColor;
varying vec2 vTroikaGlyphUV;
varying vec4 vTroikaTextureUVBounds;
varying float vTroikaTextureChannel;
varying vec3 vTroikaGlyphColor;
varying vec2 vTroikaGlyphDimensions;
`,ki=`
vec4 bounds = aTroikaGlyphBounds;
bounds.xz += uTroikaPositionOffset.x;
bounds.yw -= uTroikaPositionOffset.y;

vec4 outlineBounds = vec4(
  bounds.xy - uTroikaDistanceOffset - uTroikaBlurRadius,
  bounds.zw + uTroikaDistanceOffset + uTroikaBlurRadius
);
vec4 clippedBounds = vec4(
  clamp(outlineBounds.xy, uTroikaClipRect.xy, uTroikaClipRect.zw),
  clamp(outlineBounds.zw, uTroikaClipRect.xy, uTroikaClipRect.zw)
);

vec2 clippedXY = (mix(clippedBounds.xy, clippedBounds.zw, position.xy) - bounds.xy) / (bounds.zw - bounds.xy);

position.xy = mix(bounds.xy, bounds.zw, clippedXY);

uv = (position.xy - uTroikaTotalBounds.xy) / (uTroikaTotalBounds.zw - uTroikaTotalBounds.xy);

float rad = uTroikaCurveRadius;
if (rad != 0.0) {
  float angle = position.x / rad;
  position.xz = vec2(sin(angle) * rad, rad - cos(angle) * rad);
  normal.xz = vec2(sin(angle), cos(angle));
}
  
position = uTroikaOrient * position;
normal = uTroikaOrient * normal;

vTroikaGlyphUV = clippedXY.xy;
vTroikaGlyphDimensions = vec2(bounds[2] - bounds[0], bounds[3] - bounds[1]);


float txCols = uTroikaSDFTextureSize.x / uTroikaSDFGlyphSize;
vec2 txUvPerSquare = uTroikaSDFGlyphSize / uTroikaSDFTextureSize;
vec2 txStartUV = txUvPerSquare * vec2(
  mod(floor(aTroikaGlyphIndex / 4.0), txCols),
  floor(floor(aTroikaGlyphIndex / 4.0) / txCols)
);
vTroikaTextureUVBounds = vec4(txStartUV, vec2(txStartUV) + txUvPerSquare);
vTroikaTextureChannel = mod(aTroikaGlyphIndex, 4.0);
`,Fi=`
uniform sampler2D uTroikaSDFTexture;
uniform vec2 uTroikaSDFTextureSize;
uniform float uTroikaSDFGlyphSize;
uniform float uTroikaSDFExponent;
uniform float uTroikaDistanceOffset;
uniform float uTroikaFillOpacity;
uniform float uTroikaOutlineOpacity;
uniform float uTroikaBlurRadius;
uniform vec3 uTroikaStrokeColor;
uniform float uTroikaStrokeWidth;
uniform float uTroikaStrokeOpacity;
uniform bool uTroikaSDFDebug;
varying vec2 vTroikaGlyphUV;
varying vec4 vTroikaTextureUVBounds;
varying float vTroikaTextureChannel;
varying vec2 vTroikaGlyphDimensions;

float troikaSdfValueToSignedDistance(float alpha) {
  // Inverse of exponential encoding in webgl-sdf-generator
  
  float maxDimension = max(vTroikaGlyphDimensions.x, vTroikaGlyphDimensions.y);
  float absDist = (1.0 - pow(2.0 * (alpha > 0.5 ? 1.0 - alpha : alpha), 1.0 / uTroikaSDFExponent)) * maxDimension;
  float signedDist = absDist * (alpha > 0.5 ? -1.0 : 1.0);
  return signedDist;
}

float troikaGlyphUvToSdfValue(vec2 glyphUV) {
  vec2 textureUV = mix(vTroikaTextureUVBounds.xy, vTroikaTextureUVBounds.zw, glyphUV);
  vec4 rgba = texture2D(uTroikaSDFTexture, textureUV);
  float ch = floor(vTroikaTextureChannel + 0.5); //NOTE: can't use round() in WebGL1
  return ch == 0.0 ? rgba.r : ch == 1.0 ? rgba.g : ch == 2.0 ? rgba.b : rgba.a;
}

float troikaGlyphUvToDistance(vec2 uv) {
  return troikaSdfValueToSignedDistance(troikaGlyphUvToSdfValue(uv));
}

float troikaGetAADist() {
  
  #if defined(GL_OES_standard_derivatives) || __VERSION__ >= 300
  return length(fwidth(vTroikaGlyphUV * vTroikaGlyphDimensions)) * 0.5;
  #else
  return vTroikaGlyphDimensions.x / 64.0;
  #endif
}

float troikaGetFragDistValue() {
  vec2 clampedGlyphUV = clamp(vTroikaGlyphUV, 0.5 / uTroikaSDFGlyphSize, 1.0 - 0.5 / uTroikaSDFGlyphSize);
  float distance = troikaGlyphUvToDistance(clampedGlyphUV);
 
  // Extrapolate distance when outside bounds:
  distance += clampedGlyphUV == vTroikaGlyphUV ? 0.0 : 
    length((vTroikaGlyphUV - clampedGlyphUV) * vTroikaGlyphDimensions);

  

  return distance;
}

float troikaGetEdgeAlpha(float distance, float distanceOffset, float aaDist) {
  #if defined(IS_DEPTH_MATERIAL) || defined(IS_DISTANCE_MATERIAL)
  float alpha = step(-distanceOffset, -distance);
  #else

  float alpha = smoothstep(
    distanceOffset + aaDist,
    distanceOffset - aaDist,
    distance
  );
  #endif

  return alpha;
}
`,Ci=`
float aaDist = troikaGetAADist();
float fragDistance = troikaGetFragDistValue();
float edgeAlpha = uTroikaSDFDebug ?
  troikaGlyphUvToSdfValue(vTroikaGlyphUV) :
  troikaGetEdgeAlpha(fragDistance, uTroikaDistanceOffset, max(aaDist, uTroikaBlurRadius));

#if !defined(IS_DEPTH_MATERIAL) && !defined(IS_DISTANCE_MATERIAL)
vec4 fillRGBA = gl_FragColor;
fillRGBA.a *= uTroikaFillOpacity;
vec4 strokeRGBA = uTroikaStrokeWidth == 0.0 ? fillRGBA : vec4(uTroikaStrokeColor, uTroikaStrokeOpacity);
if (fillRGBA.a == 0.0) fillRGBA.rgb = strokeRGBA.rgb;
gl_FragColor = mix(fillRGBA, strokeRGBA, smoothstep(
  -uTroikaStrokeWidth - aaDist,
  -uTroikaStrokeWidth + aaDist,
  fragDistance
));
gl_FragColor.a *= edgeAlpha;
#endif

if (edgeAlpha == 0.0) {
  discard;
}
`;function Ai(f){const r=Wr(f,{chained:!0,extensions:{derivatives:!0},uniforms:{uTroikaSDFTexture:{value:null},uTroikaSDFTextureSize:{value:new ft},uTroikaSDFGlyphSize:{value:0},uTroikaSDFExponent:{value:0},uTroikaTotalBounds:{value:new yt(0,0,0,0)},uTroikaClipRect:{value:new yt(0,0,0,0)},uTroikaDistanceOffset:{value:0},uTroikaOutlineOpacity:{value:0},uTroikaFillOpacity:{value:1},uTroikaPositionOffset:{value:new ft},uTroikaCurveRadius:{value:0},uTroikaBlurRadius:{value:0},uTroikaStrokeWidth:{value:0},uTroikaStrokeColor:{value:new Nt},uTroikaStrokeOpacity:{value:1},uTroikaOrient:{value:new ro},uTroikaUseGlyphColors:{value:!0},uTroikaSDFDebug:{value:!1}},vertexDefs:Ti,vertexTransform:ki,fragmentDefs:Fi,fragmentColorTransform:Ci,customRewriter({vertexShader:u,fragmentShader:l}){let t=/\buniform\s+vec3\s+diffuse\b/;return t.test(l)&&(l=l.replace(t,"varying vec3 vTroikaGlyphColor").replace(/\bdiffuse\b/g,"vTroikaGlyphColor"),t.test(u)||(u=u.replace(Ta,`uniform vec3 diffuse;
$&
vTroikaGlyphColor = uTroikaUseGlyphColors ? aTroikaGlyphColor / 255.0 : diffuse;
`))),{vertexShader:u,fragmentShader:l}}});return r.transparent=!0,Object.defineProperties(r,{isTroikaTextMaterial:{value:!0},shadowSide:{get(){return this.side},set(){}}}),r}const Qr=new no({color:16777215,side:ba,transparent:!0}),va=8421504,pa=new jr,ir=new Ke,Or=new Ke,Gt=[],Mi=new Ke,Lr="+x+y";function ga(f){return Array.isArray(f)?f[0]:f}let Ma=()=>{const f=new Vr(new Xr(1,1),Qr);return Ma=()=>f,f},Ea=()=>{const f=new Vr(new Xr(1,1,32,1),Qr);return Ea=()=>f,f};const Ei={type:"syncstart"},Di={type:"synccomplete"},Da=["font","fontSize","letterSpacing","lineHeight","maxWidth","overflowWrap","text","direction","textAlign","textIndent","whiteSpace","anchorX","anchorY","colorRanges","sdfGlyphSize"],Pi=Da.concat("material","color","depthOffset","clipRect","curveRadius","orientation","glyphGeometryDetail");let Pa=class extends Vr{constructor(){const r=new xi;super(r,null),this.text="",this.anchorX=0,this.anchorY=0,this.curveRadius=0,this.direction="auto",this.font=null,this.fontSize=.1,this.letterSpacing=0,this.lineHeight="normal",this.maxWidth=1/0,this.overflowWrap="normal",this.textAlign="left",this.textIndent=0,this.whiteSpace="normal",this.material=null,this.color=null,this.colorRanges=null,this.outlineWidth=0,this.outlineColor=0,this.outlineOpacity=1,this.outlineBlur=0,this.outlineOffsetX=0,this.outlineOffsetY=0,this.strokeWidth=0,this.strokeColor=va,this.strokeOpacity=1,this.fillOpacity=1,this.depthOffset=0,this.clipRect=null,this.orientation=Lr,this.glyphGeometryDetail=1,this.sdfGlyphSize=null,this.gpuAccelerateSDF=!0,this.debugSDF=!1}sync(r){this._needsSync&&(this._needsSync=!1,this._isSyncing?(this._queuedSyncs||(this._queuedSyncs=[])).push(r):(this._isSyncing=!0,this.dispatchEvent(Ei),Fa({text:this.text,font:this.font,fontSize:this.fontSize||.1,letterSpacing:this.letterSpacing||0,lineHeight:this.lineHeight||"normal",maxWidth:this.maxWidth,direction:this.direction||"auto",textAlign:this.textAlign,textIndent:this.textIndent,whiteSpace:this.whiteSpace,overflowWrap:this.overflowWrap,anchorX:this.anchorX,anchorY:this.anchorY,colorRanges:this.colorRanges,includeCaretPositions:!0,sdfGlyphSize:this.sdfGlyphSize,gpuAccelerateSDF:this.gpuAccelerateSDF},u=>{this._isSyncing=!1,this._textRenderInfo=u,this.geometry.updateGlyphs(u.glyphBounds,u.glyphAtlasIndices,u.blockBounds,u.chunkedBounds,u.glyphColors);const l=this._queuedSyncs;l&&(this._queuedSyncs=null,this._needsSync=!0,this.sync(()=>{l.forEach(t=>t&&t())})),this.dispatchEvent(Di),r&&r()})))}onBeforeRender(r,u,l,t,e,a){this.sync(),e.isTroikaTextMaterial&&this._prepareForRender(e),e._hadOwnSide=e.hasOwnProperty("side"),this.geometry.setSide(e._actualSide=e.side),e.side=Qa}onAfterRender(r,u,l,t,e,a){e._hadOwnSide?e.side=e._actualSide:delete e.side}dispose(){this.geometry.dispose()}get textRenderInfo(){return this._textRenderInfo||null}get material(){let r=this._derivedMaterial;const u=this._baseMaterial||this._defaultMaterial||(this._defaultMaterial=Qr.clone());if((!r||r.baseMaterial!==u)&&(r=this._derivedMaterial=Ai(u),u.addEventListener("dispose",function l(){u.removeEventListener("dispose",l),r.dispose()})),this.outlineWidth||this.outlineBlur||this.outlineOffsetX||this.outlineOffsetY){let l=r._outlineMtl;return l||(l=r._outlineMtl=Object.create(r,{id:{value:r.id+.1}}),l.isTextOutlineMaterial=!0,l.depthWrite=!1,l.map=null,r.addEventListener("dispose",function t(){r.removeEventListener("dispose",t),l.dispose()})),[l,r]}else return r}set material(r){r&&r.isTroikaTextMaterial?(this._derivedMaterial=r,this._baseMaterial=r.baseMaterial):this._baseMaterial=r}get glyphGeometryDetail(){return this.geometry.detail}set glyphGeometryDetail(r){this.geometry.detail=r}get curveRadius(){return this.geometry.curveRadius}set curveRadius(r){this.geometry.curveRadius=r}get customDepthMaterial(){return ga(this.material).getDepthMaterial()}get customDistanceMaterial(){return ga(this.material).getDistanceMaterial()}_prepareForRender(r){const u=r.isTextOutlineMaterial,l=r.uniforms,t=this.textRenderInfo;if(t){const{sdfTexture:o,blockBounds:n}=t;l.uTroikaSDFTexture.value=o,l.uTroikaSDFTextureSize.value.set(o.image.width,o.image.height),l.uTroikaSDFGlyphSize.value=t.sdfGlyphSize,l.uTroikaSDFExponent.value=t.sdfExponent,l.uTroikaTotalBounds.value.fromArray(n),l.uTroikaUseGlyphColors.value=!u&&!!t.glyphColors;let i=0,s=0,c=0,d,h,y,m=0,v=0;if(u){let{outlineWidth:p,outlineOffsetX:U,outlineOffsetY:T,outlineBlur:_,outlineOpacity:k}=this;i=this._parsePercent(p)||0,s=Math.max(0,this._parsePercent(_)||0),d=k,m=this._parsePercent(U)||0,v=this._parsePercent(T)||0}else c=Math.max(0,this._parsePercent(this.strokeWidth)||0),c&&(y=this.strokeColor,l.uTroikaStrokeColor.value.set(y??va),h=this.strokeOpacity,h==null&&(h=1)),d=this.fillOpacity;l.uTroikaDistanceOffset.value=i,l.uTroikaPositionOffset.value.set(m,v),l.uTroikaBlurRadius.value=s,l.uTroikaStrokeWidth.value=c,l.uTroikaStrokeOpacity.value=h,l.uTroikaFillOpacity.value=d??1,l.uTroikaCurveRadius.value=this.curveRadius||0;let S=this.clipRect;if(S&&Array.isArray(S)&&S.length===4)l.uTroikaClipRect.value.fromArray(S);else{const p=(this.fontSize||.1)*100;l.uTroikaClipRect.value.set(n[0]-p,n[1]-p,n[2]+p,n[3]+p)}this.geometry.applyClipRect(l.uTroikaClipRect.value)}l.uTroikaSDFDebug.value=!!this.debugSDF,r.polygonOffset=!!this.depthOffset,r.polygonOffsetFactor=r.polygonOffsetUnits=this.depthOffset||0;const e=u?this.outlineColor||0:this.color;if(e==null)delete r.color;else{const o=r.hasOwnProperty("color")?r.color:r.color=new Nt;(e!==o._input||typeof e=="object")&&o.set(o._input=e)}let a=this.orientation||Lr;if(a!==r._orientation){let o=l.uTroikaOrient.value;a=a.replace(/[^-+xyz]/g,"");let n=a!==Lr&&a.match(/^([-+])([xyz])([-+])([xyz])$/);if(n){let[,i,s,c,d]=n;ir.set(0,0,0)[s]=i==="-"?1:-1,Or.set(0,0,0)[d]=c==="-"?-1:1,pa.lookAt(Mi,ir.cross(Or),Or),o.setFromMatrix4(pa)}else o.identity();r._orientation=a}}_parsePercent(r){if(typeof r=="string"){let u=r.match(/^(-?[\d.]+)%$/),l=u?parseFloat(u[1]):NaN;r=(isNaN(l)?0:l/100)*this.fontSize}return r}localPositionToTextCoords(r,u=new ft){u.copy(r);const l=this.curveRadius;return l&&(u.x=Math.atan2(r.x,Math.abs(l)-Math.abs(r.z))*Math.abs(l)),u}worldPositionToTextCoords(r,u=new ft){return ir.copy(r),this.localPositionToTextCoords(this.worldToLocal(ir),u)}raycast(r,u){const{textRenderInfo:l,curveRadius:t}=this;if(l){const e=l.blockBounds,a=t?Ea():Ma(),o=a.geometry,{position:n,uv:i}=o.attributes;for(let s=0;s<i.count;s++){let c=e[0]+i.getX(s)*(e[2]-e[0]);const d=e[1]+i.getY(s)*(e[3]-e[1]);let h=0;t&&(h=t-Math.cos(c/t)*t,c=Math.sin(c/t)*t),n.setXYZ(s,c,d,h)}o.boundingSphere=this.geometry.boundingSphere,o.boundingBox=this.geometry.boundingBox,a.matrixWorld=this.matrixWorld,a.material.side=this.material.side,Gt.length=0,a.raycast(r,Gt);for(let s=0;s<Gt.length;s++)Gt[s].object=this,u.push(Gt[s])}}copy(r){const u=this.geometry;return super.copy(r),this.geometry=u,Pi.forEach(l=>{this[l]=r[l]}),this}clone(){return new this.constructor().copy(this)}};Da.forEach(f=>{const r="_private_"+f;Object.defineProperty(Pa.prototype,f,{get(){return this[r]},set(u){u!==this[r]&&(this[r]=u,this._needsSync=!0)}})});const Oi=pe.forwardRef(({sdfGlyphSize:f=64,anchorX:r="center",anchorY:u="middle",font:l,fontSize:t=1,children:e,characters:a,onSync:o,...n},i)=>{const s=bt(({invalidate:y})=>y),[c]=pe.useState(()=>new Pa),[d,h]=pe.useMemo(()=>{const y=[];let m="";return pe.Children.forEach(e,v=>{typeof v=="string"||typeof v=="number"?m+=v:y.push(v)}),[y,m]},[e]);return io(()=>new Promise(y=>gi({font:l,characters:a},y)),["troika-text",l,a]),pe.useLayoutEffect(()=>void c.sync(()=>{s(),o&&o(c)})),pe.useEffect(()=>()=>c.dispose(),[c]),pe.createElement("primitive",zr({object:c,ref:i,font:l,text:h,anchorX:r,anchorY:u,fontSize:t,sdfGlyphSize:f},n),d)}),ma=f=>f===Object(f)&&!Array.isArray(f)&&typeof f!="function";function Kr(f,r){const u=bt(t=>t.gl),l=Yr(Hr,ma(f)?Object.values(f):f);if(pe.useLayoutEffect(()=>{r==null||r(l)},[r]),pe.useEffect(()=>{"initTexture"in u&&(Array.isArray(l)?l:[l]).forEach(u.initTexture)},[u,l]),ma(f)){const t={};let e=0;for(const a in f)t[a]=l[e++];return t}else return l}Kr.preload=f=>Yr.preload(Hr,f);Kr.clear=f=>Yr.clear(Hr,f);const Li=Na({effectFactor:1.2,dispFactor:0,tex:void 0,tex2:void 0,disp:void 0},` 
		varying vec2 vUv;
    void main() {
      vUv = uv;
      gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
    }`,` 
		varying vec2 vUv;
    uniform sampler2D tex;
    uniform sampler2D tex2;
    uniform sampler2D disp;
    uniform float _rot;
    uniform float dispFactor;
    uniform float effectFactor;
    void main() {
      vec2 uv = vUv;
      vec4 disp = texture2D(disp, uv);
      vec2 distortedPosition = vec2(uv.x + dispFactor * (disp.r*effectFactor), uv.y);
      vec2 distortedPosition2 = vec2(uv.x - (1.0 - dispFactor) * (disp.r*effectFactor), uv.y);
      vec4 _texture = texture2D(tex, distortedPosition);
      vec4 _texture2 = texture2D(tex2, distortedPosition2);
      vec4 finalTexture = mix(_texture, _texture2, dispFactor);
      gl_FragColor = finalTexture;
      #include <tonemapping_fragment>
      #include <encodings_fragment>
    } `);so({ImageFadeMaterial:Li});const ji=f=>{const{index:r,position:u,default_url:l,hover_url:t,name:e,planeWidth:a,planeHeight:o}=f,n=pe.useRef(),[i,s]=pe.useState(!1),c=bt(),{width:d,height:h}=c.viewport.getCurrentViewport(c.camera,[0,0,12]),[y,m,v]=Kr([l,t,"/sohyunjun-portfolio-vite-2024/images/home/displacement/11.jpg"]),S={font:"/sohyunjun-portfolio-vite-2024/fonts/Gantari-Regular.woff",fontSize:.15,letterSpacing:.02,lineHeight:.5,color:"#fff",position:[r%2===0?d/2.5:-d/2.5,-.35,0],"material-toneMapped":!1};return ur(()=>{n.current.dispFactor=fo.lerp(n.current.dispFactor,i?1:0,.075)}),nr.jsxs("mesh",{position:u,onPointerOver:p=>s(!0),onPointerOut:p=>s(!1),children:[nr.jsx("planeGeometry",{args:[a,o]}),nr.jsx("imageFadeMaterial",{ref:n,tex:y,tex2:m,disp:v,toneMapped:!1}),nr.jsx(Oi,{...S,children:e})]})};export{ji as F,Ni as S,Wi as a,Ua as u};
